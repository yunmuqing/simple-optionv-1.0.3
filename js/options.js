function ymqDoForEachData(t){Object.keys(t).forEach((function(i){var e=t[i];[9,10].includes(Number(e.type))&&-1==Number(bestJq.inArray("jedate",window.ymq_option.plugs))&&window.ymq_option.plugs.push("jedate"),[3,7].includes(Number(e.type))&&-1==Number(bestJq.inArray("dropdown",window.ymq_option.plugs))&&window.ymq_option.plugs.push("dropdown"),[14].includes(Number(e.type))&&-1==Number(bestJq.inArray("colpick",window.ymq_option.plugs))&&window.ymq_option.plugs.push("colpick"),[12].includes(Number(e.type))&&e.hasOwnProperty("cropped_type")&&1==Number(e.cropped_type)&&-1==Number(bestJq.inArray("cropper",window.ymq_option.plugs))&&(window.ymq_option.plugs.push("ymqmodal"),window.ymq_option.plugs.push("cropper")),0!=window.ymq_option.hideByNow&&0!=window.ymq_option.cancelAjaxCart||[12,6,7,8,16,21].includes(Number(e.type))&&(console.log(1,e),window.ymq_option.hideByNow=!0,window.ymq_option.cancelAjaxCart=!0)}))}function ymqForEachData(){ymqDoForEachData(window.ymq_option.ymq_option_data),Object.keys(window.ymq_option.ymq_option_template).forEach((function(t){ymqDoForEachData(window.ymq_option.ymq_option_template[t])}))}if(window.ymq_option.hideByNow=!1,window.ymq_option.cancelAjaxCart=!1,window.ymq_option.plugs=[],"product"==window.ymq_option.page)try{ymqForEachData()}catch(t){window.ymq_option.plugs=["jedate","dropdown","colpick","cropper","ymqmodal"]}console.log(window.ymq_option.plugs,window.ymq_option.hideByNow,window.ymq_option.cancelAjaxCart),ymq_define("Options",window.ymq_option.plugs,(function(){function justTools(t,i){this.elem=t,this.set=i}justTools.prototype={addAnimation:function(){switch(this.set.animation){case"none":break;case"fadeIn":this.obj.addClass("animated fadeIn");break;case"flipIn":switch(this.set.gravity){case"top":this.obj.addClass("animated flipInTop");break;case"bottom":this.obj.addClass("animated flipInBottom");break;case"left":this.obj.addClass("animated flipInLeft");break;case"right":this.obj.addClass("animated flipInRight")}break;case"moveInLeft":this.obj.addClass("animated moveLeft");break;case"moveInTop":this.obj.addClass("animated moveTop");break;case"moveInBottom":this.obj.addClass("animated moveBottom");break;case"moveInRight":this.obj.addClass("animated moveRight")}},close:function(){this.obj.remove(),this.elem.removeAttr("just-open")},setPosition:function(){if(""!=this.set.contents){var t={},i={x:this.elem.offset().left,y:this.elem.offset().top},e={w:this.elem.outerWidth(),h:this.elem.outerHeight()},n=i.x+e.w/2+this.obj.outerWidth()/2,a=i.x+e.w/2-this.obj.outerWidth()/2;switch(this.set.gravity){case"top":n>bestJq(window).width()?(t={x:i.x+e.w-this.obj.outerWidth(),y:i.y-this.obj.outerHeight()-this.set.distance},this.obj.find(".just-"+this.set.gravity).css("left",this.obj.outerWidth()-e.w/2+"px")):a<0?(t={x:i.x,y:i.y-this.obj.outerHeight()-this.set.distance},this.obj.find(".just-"+this.set.gravity).css("left",e.w/2+"px")):t={x:i.x-(this.obj.outerWidth()-e.w)/2,y:i.y-this.obj.outerHeight()-this.set.distance};break;case"bottom":n>bestJq(window).width()?(t={x:i.x+e.w-this.obj.outerWidth(),y:i.y+e.h+this.set.distance},this.obj.find(".just-"+this.set.gravity).css("left",this.obj.outerWidth()-e.w/2+"px")):a<0?(t={x:i.x,y:i.y+e.h+this.set.distance},this.obj.find(".just-"+this.set.gravity).css("left",e.w/2+"px")):t={x:i.x-(this.obj.outerWidth()-e.w)/2,y:i.y+e.h+this.set.distance};break;case"left":t={x:i.x-this.obj.outerWidth()-this.set.distance,y:i.y-(this.obj.outerHeight()-e.h)/2};break;case"right":t={x:i.x+e.w+this.set.distance,y:i.y-(this.obj.outerHeight()-e.h)/2}}this.obj.css({left:t.x+"px",top:t.y+"px"})}},setEvent:function(){var t=this;"click"!=t.set.events&&"onclick"!=t.set.events||t.obj.one("click",(function(t){console.log(1)})),"mouseover"!=t.set.events&&"onmouseover"!=t.set.events&&"mouseenter"!=t.set.events||this.elem.one("mouseout, mouseleave",(function(){console.log(2),t.close()})).one("click",(function(t){console.log(3)}))},setConfirmEvents:function(){var t=this,i=this.obj.find(".just-yes"),e=this.obj.find(".just-no");i.click((function(){1==t.set.onYes(t)&&t.close()})),e.click((function(){t.close(),t.set.onNo(t)}))},addConfirm:function(){this.obj.append("<div class='just-confirm'><button type='button' class='just-yes'>"+this.set.yes+"</button><button type='button' class='just-no'>"+this.set.no+"</button></div>"),this.setConfirmEvents()},setContent:function(){""!=this.set.contents&&(this.obj=bestJq("<div class='just-tooltip "+this.set.theme+"'style='width:"+this.set.width+"'><div class='just-con'>"+this.set.contents+"</div><span class='just-"+this.set.gravity+"'></span></div>"),1==this.set.confirm&&this.addConfirm(),bestJq("body").append(this.obj),this.setEvent(),this.addAnimation())},getEvent:function(){if(window.event)return window.event;for(var t=this.getEvent.caller;null!=t;){var i=t.arguments[0];if(i&&(console.log(i.constructor),i.constructor==Event||i.constructor==MouseEvent||"object"==typeof i&&i.preventDefault&&i.stopPropagation))return i;t=t.caller}return null},destroy:function(){bestJq("div[just-open]").removeAttr("just-open"),bestJq(".just-tooltip").remove()},init:function(){var t=this,i=t.getEvent();t.set.events=i.type,i.preventDefault(),i.stopPropagation(),$document=bestJq(document),"click"!=t.set.events&&"onclick"!=t.set.events||(t.destroy(),$document.one("click",(function(i){t.destroy()}))),t.setContent(),t.setPosition(),$document.one("resize",(function(){t.setPosition()}))}},bestJq.fn.justToolsTip=function(t){if(!this.attr("just-open")){this.attr("just-open","show");var i={id:(new Date).getTime(),height:"auto",width:"auto",contents:"",gravity:"top",theme:"",distance:10,animation:"none",confirm:!1,yes:"确定",no:"取消",onYes:function(){},onNo:function(){}};this.each((function(e){t=bestJq.extend(i,t),new justTools(bestJq(this),t).init()}))}},bestJq(document).on("click","[data-ymq-id]",(function(t){t.preventDefault();var i=bestJq(this).attr("data-ymq-id");bestJq("#"+i).ymq(bestJq(this).data())})),bestJq.fn.ymq=function(t){t=bestJq.extend({},{animation:"fade",animationspeed:300,closeonbackgroundclick:!0,dismissmodalclass:"close-ymq-modal"},t);return this.each((function(){var i=bestJq(this),e=parseInt(i.css("top")),n=i.height()+e,a=!1,o=bestJq(".ymq-modal-bg");0==o.length&&(o=bestJq('<div class="ymq-modal-bg" />').insertAfter(i)),i.bind("ymq:open",(function(){if(o.unbind("click.modalEvent"),bestJq("."+t.dismissmodalclass).unbind("click.modalEvent"),!a){if(s(),"fadeAndPop"==t.animation&&(i.css({top:bestJq(document).scrollTop()-n,opacity:0,visibility:"visible"}),o.fadeIn(t.animationspeed/2),i.delay(t.animationspeed/2).animate({top:bestJq(document).scrollTop()+e+"px",opacity:1},t.animationspeed,r())),"fade"==t.animation){if(i.height()+100>bestJq(window).height())var l=50;else if(i.height()>300)l=(bestJq(window).height()-i.height())/2;else l=150;i.css({opacity:0,visibility:"visible",top:l,width:i.data("width"),"margin-left":-Number(i.data("width"))/2}),o.fadeIn(t.animationspeed/2),i.delay(t.animationspeed/2).animate({opacity:1},t.animationspeed,r())}"none"==t.animation&&(i.css({visibility:"visible",top:bestJq(document).scrollTop()+e}),o.css({display:"block"}),r())}i.unbind("ymq:open")})),i.bind("ymq:close",(function(){a||(s(),"fadeAndPop"==t.animation&&(o.delay(t.animationspeed).fadeOut(t.animationspeed),i.animate({top:bestJq(document).scrollTop()-n+"px",opacity:0},t.animationspeed/2,(function(){i.css({top:e,opacity:1,visibility:"hidden"}),r()}))),"fade"==t.animation&&(o.delay(t.animationspeed).fadeOut(t.animationspeed),i.animate({opacity:0},t.animationspeed,(function(){i.css({opacity:1,visibility:"hidden",top:e}),r()}))),"none"==t.animation&&(i.css({visibility:"hidden",top:e}),o.css({display:"none"}))),i.unbind("ymq:close")})),i.trigger("ymq:open");bestJq("."+t.dismissmodalclass).bind("click.modalEvent",(function(){i.trigger("ymq:close")}));function r(){a=!1}function s(){a=!0}t.closeonbackgroundclick&&(o.css({cursor:"pointer"}),o.bind("click.modalEvent",(function(){i.trigger("ymq:close")}))),bestJq("body").keyup((function(t){27===t.which&&i.trigger("ymq:close")}))}))};let Config=class Config{constructor(){var t=this;t.instance=null,t.util=Util.getInstance(),t.init()}init(){var t=this;String.prototype.endWith=function(t){var i=this.length-t.length;return i>=0&&this.lastIndexOf(t)==i},t.Shopify={},t.money_format="",t.form_box="",t.onetimetag="",t.cart_form='form[action*="/cart"]',t.discount_box="#ymq_discount_box",t.styleDomId="#ymq-jsstyle",t.add_to_cart="ymq-add-to-cart-button",t.buy_id_now="ymq-buy-it-now-button",t.quantity_box="ymq-quantity-box",t.quantity_input="ymq-quantity-input",t.quantity_add="ymq-quantity-add",t.quantity_cut="ymq-quantity-cut",t.quantity_change="ymq-quantity-change",t.min_quantity=0,t.max_quantity=9999999,t.ymq_extra_0={},t.hasError=!1,t.multipleTypeArray=[6,7,8],t.emailRe=/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/,t.numberRe=/^[0-9]+\.?[0-9]*/,t.ymq_variant_id="ymq-variant-id",t.ymq_option_title="ymq-option-title",t.basImgUrl="http://ymq-shopify.oss-us-east-1.aliyuncs.com/",t.img_suffix="?x-oss-process=image/resize,w_100/quality,q_80",t.please="please",t.box_prefix="option-box-",t.attrib_prefix="ymq-attrib-",t.attrib_item_prefix="ymq-attrib-item-",t.optionHtml="",t.selectedYmqOption={},t.product="",t.ymq_shopify_options="",t.ymq_option_data="",t.ymq_option_condition="",t.ymq_option_template="",t.ymq_option_template_condition="",t.ymq_option_settings="",t.ymq_option_branding="",t.ymq_has_only_default_variant="",t.variantData="",t.tem_prefix="tem",t.ymq_enLang={name:"en",month:["01","02","03","04","05","06","07","08","09","10","11","12"],weeks:["SU","MO","TU","WE","TH","FR","SA"],times:["Hour","Minute","Second"],timetxt:["Time","Start Time","End Time"],backtxt:"Back",clear:"Clear",today:"Now",yes:"Confirm",close:"Close"},t.ymq_jedateblue={bgcolor:"#275efe",color:"#ffffff",pnColor:"#bff3ff"},t.ymq_jedategreen={bgcolor:"#00A680",pnColor:"#00DDAA"},t.ymq_jedatered={bgcolor:"#D91600",pnColor:"#FF6653"},t.initFormat()}initFormat(){var t=this;return t.Shopify=Shopify,t.NumberFormat=new Intl.NumberFormat("en-US",{style:"currency",currency:t.Shopify.currency.active}),t.initMinMax(),t}initMinMax(){var t=this;if(window.ymq_option.hasOwnProperty("ymq_extra_0")&&(t.ymq_extra_0=window.ymq_option.ymq_extra_0,"product"==window.ymq_option.page&&window.ymq_option.product.hasOwnProperty("id")&&t.ymq_extra_0.hasOwnProperty(window.ymq_option.product.id.toString()))){var i=t.ymq_extra_0[window.ymq_option.product.id.toString()];""==i.min?t.min_quantity=0:t.min_quantity=Number(i.min),""==i.max?t.max_quantity=999999:t.max_quantity=Number(i.max)}}getMinMaxByProduct(t,i){if(t&&this.ymq_extra_0.hasOwnProperty(t.toString())){var e=this.ymq_extra_0[t.toString()];if(""!=e.max&&i>e.max)return e.max;if(""!=e.min&&i<e.min)return e.min}return null}doFormat(t,i=0,e=!1){var n=this,a="";return a=1==Number(i)?n.NumberFormat.format(t*n.Shopify.currency.rate)+n.onetimetag:n.NumberFormat.format(t*n.Shopify.currency.rate),1==e&&(a=`<span class="ymq-price-span">${a}</span>`),a}doFormatWithoutRate(t,i=!1){var e=this.NumberFormat.format(t);return 1==i&&(e=`<span class="ymq-price-span">${e}</span>`),e}getPriceWithRate(t){return t*this.Shopify.currency.rate}getSelectButtonPrice(t,i){var e=this,n=e.util.getValue(e.ymq_option_branding.extra,"price-value","3,7,15,16");return((n=n.split(",")).indexOf(i.toString())>-1||n.indexOf(Number(i))>-1)&&t>0?` <span class="ymq-price-in-option-value"> + ${e.doFormat(t,0,!0)}</span>`:""}ymqHook(key){var that=this,hookCode=that.util.getValue(that.ymq_option_branding.extra,key,"");if(""!=hookCode)try{eval(hookCode)}catch(t){console.log(t)}}static getInstance(){return this.instance||(this.instance=new Config),this.instance}},Html=class t{constructor(t){var i=this;i.instance=null,i.initJson=t,i.config=Config.getInstance(),i.init()}initMemberVariables(){var t=this;t.optionHtml="",t.selectedYmqOption={},t.isShopify=!1,t.json={},t.validate=[],t.tool_text="",t.alert_text="",t.help_text="",t.variant_id=0,t.conditionJson={},t.needAddLabel=[],t.config.hasQuantity=!1,t.config.quantity_is_fix_type=!1,t.config.quantity_has_value=!0,t.config.max_num=999999}init(){this.initMemberVariables()}buildtHtml(){var t=this;return Object.keys(t.json).forEach((function(i){switch(t.beforeCreat(i),t.selectedYmqOption.type.toString()){case"1":t.creatField().doCreatOptionHtml();break;case"2":t.creatArea().doCreatOptionHtml();break;case"3":t.creatSelect().doCreatOptionHtml().initDropdown();break;case"4":t.creatRadio().doCreatOptionHtml();break;case"15":t.creatRadioButton().doCreatOptionHtml();break;case"5":t.creatCanvas().doCreatOptionHtml();break;case"6":t.creatCheckbox().doCreatOptionHtml();break;case"16":t.creatCheckboxButton().doCreatOptionHtml();break;case"7":t.creatSelect("multiple").doCreatOptionHtml().initDropdown();break;case"8":t.creatCanvas("checkbox").doCreatOptionHtml();break;case"9":case"10":t.creatDate().doCreatOptionHtml().initData();break;case"11":t.creatCustomeText().doCreatOptionHtml();break;case"12":t.creatFile().doCreatOptionHtml().initFile();break;case"13":t.creatSwitch().doCreatOptionHtml();break;case"14":t.creatColorPick().doCreatOptionHtml().initColpick();break;case"17":t.creatLayout().doCreatOptionHtml();break;case"18":t.creatFixedQuantity().doCreatOptionHtml();break;case"19":t.creatFixedQuantity(19).doCreatOptionHtml();break;case"100":t.setJson(t.config.ymq_option_template[t.config.tem_prefix+t.selectedYmqOption.id],t.config.ymq_option_template_condition[t.config.tem_prefix+t.selectedYmqOption.id]).buildtHtml().setJson(t.config.ymq_option_data,t.config.ymq_option_condition)}})),t}validateIsHasLabel(){return this.selectedYmqOption.label,this}beforeCreat(t){var i=this;if(i.selectedYmqOption=i.json[t],this.selectedYmqOption.hasOwnProperty("isShopify")?i.isShopify=!0:i.isShopify=!1,!i.isShopify){var e=bestJq(`[name="${i.creatName(bestJq(this).data("label"))}"]`);if(e.length>=1&&-1==bestJq.inArray(i.selectedYmqOption.label,i.needAddLabel)){i.needAddLabel.push(i.selectedYmqOption.label);var n=e.eq(0).parents(".ymq-options-box"),a=i.creatName(n.data("label")+n.data("id"));console.log(a),n.attr("data-name",a),console.log(n.attr("id")),console.log(n.data("name")),e.each((function(){e.prop("name",a)}))}}return i.validateIsHasLabel(),i.buildValidate(),i.buildTooltip(),i.buildAlert(),i.buildHelp(),i}buildValidate(){var t=this;if(t.validate=[],1==Number(t.selectedYmqOption.required)&&t.validate.push("required"),(1==Number(t.selectedYmqOption.type)&&1==Number(t.selectedYmqOption.field_type)||2==Number(t.selectedYmqOption.type))&&(t.selectedYmqOption.min_char>0&&t.validate.push("minchar:"+t.selectedYmqOption.min_char),t.selectedYmqOption.max_char>0&&t.validate.push("maxchar:"+t.selectedYmqOption.max_char)),t.selectedYmqOption.hasOwnProperty("min_s")&&t.selectedYmqOption.min_s>0&&t.validate.push("min_s:"+t.selectedYmqOption.min_s),t.selectedYmqOption.hasOwnProperty("max_s")&&t.selectedYmqOption.max_s>0&&t.validate.push("max_s:"+t.selectedYmqOption.max_s),1==Number(t.selectedYmqOption.type))switch(t.selectedYmqOption.field_type){case"2":t.validate.push("email");break;case"3":t.validate.push("phone");break;case"4":t.validate.push("number"),t.selectedYmqOption.min>0&&t.validate.push("numbermin:"+t.selectedYmqOption.min),t.selectedYmqOption.max>0&&t.validate.push("numbermax:"+t.selectedYmqOption.max);break;case"5":t.selectedYmqOption.min>0&&t.validate.push("numbermin:"+t.selectedYmqOption.min),t.selectedYmqOption.max>0&&t.validate.push("numbermax:"+t.selectedYmqOption.max),t.validate.push("integer")}return t.validate.length>0?t.validate='data-validate="'+t.validate.join("|")+'"':t.validate="",t}buildTooltip(){var t=this;t.tool_text="",""!=t.selectedYmqOption.tooltip&&(t.tool_text=`<span class="ymq_tools ymq_tool_span" data-title="${t.selectedYmqOption.tooltip}"></span>`)}buildAlert(){var t=this;if(t.alert_text="",t.selectedYmqOption.hasOwnProperty("a_t1")||(t.selectedYmqOption.a_t1="",t.selectedYmqOption.a_t2="",t.selectedYmqOption.alert_text=""),t.selectedYmqOption.hasOwnProperty("alert_text")&&""!=t.selectedYmqOption.alert_text){var i="";""==!t.selectedYmqOption.a_t2&&(i=`<img class="ymq_img_alert" src="${t.selectedYmqOption.a_t2}">`),t.alert_text=`\n\t\t\t\t\t<div class="ymq_alert_box2" data-ymq-id="ymqdialogbox${t.selectedYmqOption.id}">\n\t\t\t\t\t\t${i+t.selectedYmqOption.a_t1}\n\t\t\t\t\t</div>`,bestJq("body").append(`\n\t\t\t\t\t<div id="ymqdialogbox${t.selectedYmqOption.id}" data-width="${t.selectedYmqOption.a_width}" class="ymq-modal">\n\t\t\t\t      <span class="close-ymq-modal">\n\t\t\t\t          &#215;\n\t\t\t\t      </span>\n\t\t\t\t      <div class="ymq-modal-content">\n\t\t\t\t          ${t.selectedYmqOption.alert_text}\n\t\t\t\t      </div>\n\t\t\t\t    </div>\n\t\t\t\t`)}}buildHelp(){var t=this;t.help_text="",""!=t.selectedYmqOption.help&&(t.help_text=`<div class="ymq_help_box">${t.selectedYmqOption.help}</div>`)}doCreatOptionHtml(){var t=this,i="",e="",n="",a="",o="",r=Number(t.config.util.getValue(this.selectedYmqOption,"hide_title",0));if(null==t.selectedYmqOption)return t;if([18,19].includes(Number(t.selectedYmqOption.type))&&window.ymq_option.ymq_option_branding.extra.plan<3)return t;1==Number(t.selectedYmqOption.required)&&(o="required");var s=!0;if([18,19].includes(Number(t.selectedYmqOption.type))&&bestJq.isEmptyObject(t.selectedYmqOption.options)&&(s=!1),11!=t.selectedYmqOption.type&&17!=t.selectedYmqOption.type&&s){i=`<div ${1==r?'style="display:none;"':""} class="${t.config.ymq_option_title}"><span class="ymq_lable ${o}">${t.selectedYmqOption.label}</span>${t.alert_text}${t.tool_text}<span class="ymq_option_text_span"></span><span class="ymq_option_price_span"></span></div>`;1==Number(t.selectedYmqOption.tooltip_position)?e=t.help_text:2==Number(t.selectedYmqOption.tooltip_position)?n=t.help_text:a=t.help_text}return this.optionHtml=`\n\t\t\t\t<div \n\t\t\t\t\tclass="ymq-options-box ymq-options-box-${this.selectedYmqOption.type} ${this.isShopify?"ymq-shopify-option-box":""} ${t.config.util.getValue(t.selectedYmqOption,"class","")}" \n\t\t\t\t\tid="${t.config.box_prefix}${this.selectedYmqOption.id}"\n\t\t\t\t\tdata-type="${this.selectedYmqOption.type}"\n\t\t\t\t\tdata-id="-${t.selectedYmqOption.id.toString().split("tem").join("-")}"\n\t\t\t\t\tdata-name="${this.creatName()}"\n\t\t\t\t\tdata-label="${this.selectedYmqOption.label}"\n\t\t\t\t\tdata-onetime="${this.getOneTime()}"\n\t\t\t\t\tdata-class="${t.config.attrib_prefix}${t.selectedYmqOption.id}"\n\t\t\t\t\t${t.validate}\n\t\t\t\t>\n\t\t\t\t\t${n}\n\t\t\t\t\t${i}\n\t\t\t\t\t${a}\n\t\t\t\t\t${t.optionHtml}\n\t\t\t\t\t<div class="ymq-error-box"></div>\n\t\t\t\t\t${e}\n\t\t\t\t</div>\n\t\t\t`,""!=t.optionHtml&&bestJq("#ymq-box").append(t.optionHtml),t}getOneTime(){return this.config.util.getValue(this.selectedYmqOption,"onetime","0")}creatColorPick(){var t=this;return t.optionHtml=`\n\t\t\t\t<div class="ymq-input-color-box">\n\t\t\t\t\t<input readonly class="ymq-input-text ymq-input-color ${t.config.attrib_prefix}${t.selectedYmqOption.id}" type="text" id="${t.config.attrib_prefix}${t.selectedYmqOption.id}" data-id="${t.selectedYmqOption.id}" data-one_time="${t.selectedYmqOption.one_time}" data-price="0" value="" name="${t.creatName()}">\n\t\t\t\t\t<div class="ymq-input-color-button"></div>\n\t\t\t\t</div>\n\t\t\t`,t}creatAccept(){var t="";return 1==this.selectedYmqOption.file_type&&(t='accept="image/*"'),t}creatFileMultiple(){var t=this,i='multiple="multiple"';return(1==t.selectedYmqOption.file_num||0!=t.config.util.getValue(t.selectedYmqOption,"cropped_type","0"))&&(i=""),i}creatFile(){var t=this;return t.optionHtml=`\n\t\t\t\t<div class="ymq_upload_new_box">\n\t\t\t\t\t<div class="ymq_upload_img_view spotlight-group">\n\t\t\t\t\t\t<label data-show="" id="ymq_upload${t.selectedYmqOption.id}" class="ymq_upload_new" style="z-index: 1;">\n\t\t\t\t\t\t\t<input ${t.creatAccept()} ${this.creatFileMultiple()} type="file" data-file-num="${t.selectedYmqOption.file_num}" data-rectangle-ratio="${t.config.util.getValue(t.selectedYmqOption,"rectangle_ratio","")}" data-file-type="${t.selectedYmqOption.file_type}" data-cropper="${t.config.util.getValue(t.selectedYmqOption,"cropped_type","0")}" style="display: none;" class="${t.config.attrib_prefix}${t.selectedYmqOption.id} ymq-options-file-input" name="${t.creatName()}" data-price="0" id="${t.config.attrib_prefix}${t.selectedYmqOption.id}">\n\t\t\t\t\t\t\t<svg class="icon" style="width: 24px; height: 24px;vertical-align: middle;fill: currentColor;overflow: hidden;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2737"><path d="M662.63 545.37l-128-128a32 32 0 0 0-45.25 0l-128 128a32 32 0 1 0 45.25 45.25L480 517.25V872a32 32 0 0 0 64 0V517.25l73.37 73.37a32 32 0 1 0 45.25-45.25zM752 760H640a32 32 0 0 1 0-64h112c79.4 0 144-64.6 144-144a144 144 0 0 0-132.45-143.54 32 32 0 0 1-29.24-28C720.6 268.46 625 184 512 184s-208.6 84.46-222.31 196.45a32 32 0 0 1-29.24 28A144 144 0 0 0 128 552c0 79.4 64.6 144 144 144h112a32 32 0 0 1 0 64H272c-114.69 0-208-93.31-208-208a208.08 208.08 0 0 1 166.23-203.79C258 216.5 375 120 512 120s254 96.5 281.77 228.21A208.08 208.08 0 0 1 960 552c0 114.69-93.31 208-208 208z" p-id="2738"></path></svg>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="ymq_upload_box ymq_upload_file_view">\n\n\t\t\t\t</div>\n\t\t\t`,t}creatSwitch(){var t=this;return t.optionHtml=`\n\t\t\t\t\n\t\t\t\t<div>\n\t\t\t\t\t<input class="ymq-checkbox-radio ymq-Switch ${t.config.attrib_prefix}${t.selectedYmqOption.id}" type="checkbox" id="${t.config.attrib_prefix}${t.selectedYmqOption.id}" data-id="${t.selectedYmqOption.id}" data-one_time="${t.selectedYmqOption.one_time}" data-price="0" value="${t.selectedYmqOption.switch_text}" name="${t.creatName()}" id="tool-${t.selectedYmqOption.id}" ${1==Number(t.selectedYmqOption.default)?"checked":""}>\n\t\t\t\t\t<label for="${t.config.attrib_prefix}${t.selectedYmqOption.id}">${t.selectedYmqOption.switch_text}</label>\n\t\t\t\t</div>\n\t\t\t`,t}creatField(){var t=this,i="";""!=t.selectedYmqOption.default_text&&null!=t.selectedYmqOption.default_text&&(i=`value="${t.selectedYmqOption.default_text}"`);var e="";return""!=t.selectedYmqOption.placeholder&&null!=t.selectedYmqOption.placeholder&&(e=`placeholder="${t.selectedYmqOption.placeholder}"`),t.optionHtml=`\n\t\t\t\t<input ${i} ${e} class="ymq-input-text ${t.config.attrib_prefix}${t.selectedYmqOption.id}" type="text" name="${t.creatName()}" data-price="0" id="${t.config.attrib_prefix}${t.selectedYmqOption.id}">\n\t\t\t`,t}creatCustomeText(){var t=this;return t.optionHtml=`\n\t\t\t\t<div class="ymq_custome_text">${t.selectedYmqOption.html}</div>\n\t\t\t`,t}creatLayout(){var t=this;t.selectedYmqOption.hasOwnProperty("a_t1")||(t.selectedYmqOption.a_t1="",t.selectedYmqOption.a_t2="",t.selectedYmqOption.a_width="700",t.selectedYmqOption.alert_text="");var i="";return""==!t.selectedYmqOption.a_t2&&(i=`<img class="ymq_img_alert" src="${t.selectedYmqOption.a_t2}">`),""!=t.selectedYmqOption.alert_text?(t.optionHtml=`\n\t\t\t\t\t<div class="ymq_alert_box" data-ymq-id="ymqdialogbox${t.selectedYmqOption.id}">\n\t\t\t\t\t\t${i+t.selectedYmqOption.a_t1}\n\t\t\t\t\t</div>\n\t\t\t\t`,bestJq("body").append(`\n\t\t\t\t\t<div id="ymqdialogbox${t.selectedYmqOption.id}" data-width="${t.selectedYmqOption.a_width}" class="ymq-modal">\n\t\t\t\t      <span class="close-ymq-modal">\n\t\t\t\t          &#215;\n\t\t\t\t      </span>\n\t\t\t\t      <div class="ymq-modal-content">\n\t\t\t\t          ${t.selectedYmqOption.alert_text}\n\t\t\t\t      </div>\n\t\t\t\t    </div>\n\t\t\t\t`)):t.optionHtml="",t}creatArea(){var t=this,i="";""!=t.selectedYmqOption.default_text&&null!=t.selectedYmqOption.default_text&&(i=t.selectedYmqOption.default_text);var e="";return""!=t.selectedYmqOption.placeholder&&null!=t.selectedYmqOption.placeholder&&(e=`placeholder="${t.selectedYmqOption.placeholder}"`),t.optionHtml=`\n\t\t\t\t<textarea ${e} class="ymq-input-text ${t.config.attrib_prefix}${t.selectedYmqOption.id}" data-price="0" name="${t.creatName()}" id="${t.config.attrib_prefix}${t.selectedYmqOption.id}">${i}</textarea>\n\t\t\t`,t}creatSelect(t=""){var i=this,e=i.selectedYmqOption.options,n=i.conditionJson;for(var a in i.optionHtml=`\n\t                <select style="display: none;" multiple name="${i.creatName()}"  id="${i.config.attrib_prefix}${i.selectedYmqOption.id}" class="ymq-dropdown ${i.config.attrib_prefix}${i.selectedYmqOption.id} ${"multiple"==t?"ymq-multiple":""} ${i.isShopify?"ymq-shopify-option":""}" placeholder="${i.config.ymq_option_branding.lan.please_choose}">\n\t        `,e){var o=e[a],r="";0==Number(o.hasstock)?r=`data-title="${i.config.ymq_option_branding.lan.sold_out}" disabled`:n.hasOwnProperty(o.id)&&(r=`data-title="${n[o.id].disabled_text}"`),i.optionHtml+=`\n\t                <option ${r} ${1==Number(o.default)?"selected":""} class="${i.config.attrib_item_prefix}${o.id}" id="${i.config.attrib_prefix}${o.id}" data-id="${o.id}" data-one_time="${o.one_time}" data-price="0" value="${o.value}">${o.value}${i.config.getSelectButtonPrice(0,i.selectedYmqOption.type.toString())}</option>\n\t            `}return i.optionHtml+="\n\t                </select>\n\t        ",i}creatCheckboxButton(){return this.creatrcbtn("checkbox"),this}creatRadioButton(){return this.creatrcbtn(),this}creatrcbtn(t="radio"){var i=this,e=this.selectedYmqOption.options,n=i.conditionJson;for(var a in this.optionHtml="\n\t\t\t\t\t\n\t\t\t\t\t<div>\n\t\t\t\t",e){var o=e[a],r="",s="",l="";0==Number(o.hasstock)?(r=`data-title="${i.config.ymq_option_branding.lan.sold_out}"`,s="ymq_disabled_class ymq_sold_out",l="disabled"):n.hasOwnProperty(o.id)&&(r=`data-title="${n[o.id].disabled_text}"`,s="ymq_disabled_class ymq_condition_disabled"),this.optionHtml+=`\n\t\t\t \t\t<input ${l} ${r} class="ymq-options-button-input ${s} ${i.isShopify?"ymq-shopify-option":""} ${i.config.attrib_prefix}${i.selectedYmqOption.id}" id="${i.config.attrib_prefix}${o.id}" data-id="${o.id}" data-one_time="${o.one_time}" data-price="0" value="${o.value}" type="${t}" name="${i.creatName()}" id="tool-${o.id}" ${1==Number(o.default)?"checked":""}>\n\t\t\t\t    <label ${r} class="ymq-options-button-label ${i.config.attrib_item_prefix}${o.id}" for="${i.config.attrib_prefix}${o.id}">\n\t\t\t\t        ${o.value}${i.config.getSelectButtonPrice(0,i.selectedYmqOption.type.toString())}\n\t\t\t\t    </label>\n\t\t\t \t`}return this.optionHtml+="\n\t\t\t\t\t</div>\n\t\t\t",i}creatFixedQuantity(t=18){var i=this,e=this.selectedYmqOption.options,n=(i.conditionJson,1),a=i.config.util.getValue(i.config.ymq_option_branding.lan,"q-buy","Buy:"),o=i.config.util.getValue(i.config.ymq_option_branding.lan,"q-save","Save");if(1==i.config.hasQuantity)return this.optionHtml="",i.selectedYmqOption=null,i;if(i.config.hasQuantity=!0,i.config.quantity={},i.config.quantity.defalut_quantity=i.config.min_quantity,i.config.quantity.type=t,i.config.quantity.options={},18==Number(t)&&(i.config.quantity_is_fix_type=!0),bestJq.isEmptyObject(e))this.optionHtml=`<input value="222"  type="hidden" name="${i.creatName()}" >`,i.config.quantity_has_value=!1;else{for(var r in this.optionHtml="\n\t\t\t\t\t\t<div>\n\t\t\t\t\t",e){var s=e[r];i.config.quantity.options[Number(s.quantity)]={quantity:Number(s.quantity),discount:Number(s.discount),discount_type:Number(s.discount_type)}}if(i.config.quantity.options[0]={quantity:0,discount:0,discount_type:2},19==t){var l="",c=0;for(var r in i.config.quantity.options){i.config.quantity.options[r];""!=l&&(i.config.quantity.options[l].quantity_max=r-1),1==c&&i.config.min_quantity>r&&(i.config.min_quantity=Number(r)),i.config.max_quantity<r&&(i.config.max_quantity=Number(r)),c++,i.config.quantity.options[r].quantity_max=i.config.max_num,l=r}}console.log(i.config.quantity.options,i.config.min_quantity,i.config.max_quantity),Object.keys(e).forEach((function(r,s){var l=e[r],c="";c=1==Number(l.discount_type)?`${l.discount}%`:`-${i.config.doFormat(l.discount)}`;var d="";if(d=""==l.discount||0==Number(l.discount)?`<span style="display:none !important;" class="ymq-quantity-discount-price" data-quantity="${l.quantity}" data-discount="${l.discount}" data-discount_type="${l.discount_type}">${i.config.doFormat(80)}</span><span class="ymq-quantity-compared-price-no-discount" data-quantity="${l.quantity}">${i.config.doFormat(100)}</span>`:`<span class="ymq-quantity-discount-price" data-quantity="${l.quantity}" data-discount="${l.discount}" data-discount_type="${l.discount_type}">${i.config.doFormat(80)}</span><span class="ymq-quantity-compared-price" data-quantity="${l.quantity}">${i.config.doFormat(100)}</span><span class="ymq-quantity-discount">${1==Number(l.discount_type)?o:""} ${c}</span>`,19==t){var p=!1;1==Number(l.default)&&(i.config.quantity.defalut_quantity=Number(l.quantity))}else{if(1==n){p=!0;i.config.quantity.defalut_quantity=Number(l.quantity)}else p=!1;1==Number(l.default)&&(i.config.quantity.defalut_quantity=Number(l.quantity))}i.optionHtml+=`\n\t\t\t\t\t<div class="ymq-quantity-radio-box">\n\t\t\t\t \t\t<input data-index="${s}" value="${l.quantity}"  class="ymq-checkbox-radio ymq-quantity-radio ymq-quantity-radio-${l.quantity}  ${i.isShopify?"ymq-shopify-option":""} ${i.config.attrib_prefix}${i.selectedYmqOption.id}" id="${i.config.attrib_prefix}${l.id}" data-id="${l.id}" type="radio" name="${i.creatName()}" id="tool-${l.id}" ${1==Number(l.default)||p?"checked":""}>\n\t\t\t\t\t    <label class="ymq-quantity-radio-label" for="${i.config.attrib_prefix}${l.id}"><span class="ymq-quantity-buy">${a}</span><span class="ymq-quantity-buy-quantity">${l.quantity}${19==t?"+":""}</span>${d}</label>\n\t\t\t\t \t</div>\n\t\t\t\t \t`,n++})),19==t&&(this.optionHtml+=`\n\t\t\t\t\t<div class="ymq-quantity-show-box ymq-quantity-radio-box">\n\t\t\t\t\t    <span><span class="ymq-quantity-buy">${a} </span><span class="ymq-quantity-buy-quantity">99+</span><span class="ymq-quantity-discount-price"></span><span class="ymq-quantity-compared-price"></span><span class="ymq-quantity-discount"> -€10.00</span></span>\n\t\t\t\t \t</div>\n\t\t\t\t \t`),this.optionHtml+="\n\t\t\t\t\t\t</div>\n\t\t\t\t"}return i}creatCheckbox(){return this.creatrc("checkbox"),this}creatRadio(){return this.creatrc(),this}creatrc(t="radio"){var i=this,e=this.selectedYmqOption.options,n=i.conditionJson;for(var a in this.optionHtml="\n\t\t\t\t\t<div>\n\t\t\t\t",e){var o=e[a],r="",s="",l="";0==Number(o.hasstock)?(r=`data-title="${i.config.ymq_option_branding.lan.sold_out}"`,s="ymq_disabled_class ymq_sold_out",l="disabled"):n.hasOwnProperty(o.id)&&(r=`data-title="${n[o.id].disabled_text}"`,s="ymq_disabled_class ymq_condition_disabled"),this.optionHtml+=`\n\t\t\t\t<div class="ymq_r_c_box ${i.config.attrib_item_prefix}${o.id}">\n\t\t\t \t\t<input ${l} ${r} class="ymq-checkbox-radio ${s} ${i.isShopify?"ymq-shopify-option":""} ${i.config.attrib_prefix}${i.selectedYmqOption.id}" id="${i.config.attrib_prefix}${o.id}" data-id="${o.id}" data-one_time="${o.one_time}" data-price="0" value="${o.value}" type="${t}" name="${i.creatName()}" id="tool-${o.id}" ${1==Number(o.default)?"checked":""}>\n\t\t\t\t    <label ${r} for="${i.config.attrib_prefix}${o.id}">${o.value} ${i.config.getSelectButtonPrice(0,i.selectedYmqOption.type.toString())}</label>\n\t\t\t \t</div>\n\t\t\t \t`}return this.optionHtml+="\n\t\t\t\t\t</div>\n\t\t\t",i}creatCanvas(t="radio"){var i=this,e=i.selectedYmqOption.options,n=i.conditionJson,a=!1,o=!1;1==i.config.util.getValue(i.config.ymq_option_branding.extra,"img-option-bigger",1)&&(a=!0),2==i.config.util.getValue(i.config.ymq_option_branding.extra,"img-option-bigger",1)&&(o=!0),3==i.config.util.getValue(i.config.ymq_option_branding.extra,"img-option-bigger",1)&&(a=!0,o=!0);var r="";for(var s in i.selectedYmqOption.hasOwnProperty("style")&&2==Number(i.selectedYmqOption.style)&&(2==Number(i.selectedYmqOption.zoom)?(a=!0,o=!1):3==Number(i.selectedYmqOption.zoom)?(a=!1,o=!1):4==Number(i.selectedYmqOption.zoom)?(a=!1,o=!0):5==Number(i.selectedYmqOption.zoom)&&(a=!0,o=!0),""!=i.selectedYmqOption.width&&(r+=`width:${i.selectedYmqOption.width}px;`),""!=i.selectedYmqOption.height&&(r+=`height:${i.selectedYmqOption.height}px;`),""!=i.selectedYmqOption.b_radius&&(r+=`border-radius: ${i.selectedYmqOption.b_radius}px;`)),this.optionHtml='\n\t\t\t\t\t<div class="spotlight-group">\n\t\t\t\t',e){var l=e[s],c="",d="",p="";0==Number(l.hasstock)?(c=`data-title="${i.config.ymq_option_branding.lan.sold_out}"`,d="ymq_disabled_class ymq_sold_out",p="disabled"):n.hasOwnProperty(l.id)&&(c=`data-title="${n[l.id].disabled_text}"`,d="ymq_disabled_class ymq_condition_disabled");var m=l.value;2==l.canvas_type?(o&&(m=`<img class='ymq_tooltip_switch_img' src='${l.canvas2}'><br>${l.value}`),this.optionHtml+=`\n\t\t\t\t \t\t<input ${p} ${c} class="ymq-options-img-input ${d} ${i.isShopify?"ymq-shopify-option":""} ${i.config.attrib_prefix}${i.selectedYmqOption.id}" id="${i.config.attrib_prefix}${l.id}" data-id="${l.id}" data-one_time="${l.one_time}" data-price="0" value="${l.value}" type="${t}" name="${i.creatName()}" id="tool-${l.id}" ${1==Number(l.default)?"checked":""}>\n\t\t\t\t\t    <label ${c} data-show="${m}" style="${r}background: url(${i.config.util.getShopifySmallImg(l.canvas2)}) center top / cover;" class="ymq-options-img-label ymq-dicopy" data-addclass="ymq_tooltip_switch_img_box" for="${i.config.attrib_prefix}${l.id}">\n\t\t\t\t\t    `,a&&(this.optionHtml+=`\n\t\t\t\t\t    <div class="spotlight" data-src="${l.canvas2}" data-description="${l.value}"></div>\n\t\t\t\t\t\t`),i.config.util.getValue(i.config.ymq_option_branding.img,"--img-selected-upper-url","")&&(this.optionHtml+=`<img class="ymq-selected-img-up-img ymq-img-up-img" src="${i.config.util.getValue(i.config.ymq_option_branding.img,"--img-selected-upper-url","")}" alt="">`),i.config.util.getValue(i.config.ymq_option_branding.img,"--img-disabled-upper-url","")&&(this.optionHtml+=`<img class="ymq-disabled-img-up-img ymq-img-up-img" src="${i.config.util.getValue(i.config.ymq_option_branding.img,"--img-disabled-upper-url","")}" alt="">`),this.optionHtml+="\n\t\t\t\t\t    </label>\n\t\t\t\t \t"):(this.optionHtml+=`\n\t\t\t\t\t\t<input ${p} ${c} class="ymq-options-img-input ${d} ${i.isShopify?"ymq-shopify-option":""} ${i.config.attrib_prefix}${i.selectedYmqOption.id}" id="${i.config.attrib_prefix}${l.id}" data-id="${l.id}" data-one_time="${l.one_time}" data-price="0" value="${l.value}" type="${t}" name="${i.creatName()}" id="tool-${l.id}" ${1==Number(l.default)?"checked":""}>\n\t\t\t\t\t    <label ${c} data-show="${m}" style="${r}background-color: #${l.canvas1};" class="ymq-options-img-label ymq-dicopy" for="${i.config.attrib_prefix}${l.id}">\n\t\t\t\t\t    \n\t\t\t\t \t`,i.config.util.getValue(i.config.ymq_option_branding.img,"--img-selected-upper-url","")&&(this.optionHtml+=`<img class="ymq-selected-img-up-img ymq-img-up-img" src="${i.config.util.getValue(i.config.ymq_option_branding.img,"--img-selected-upper-url","")}" alt="">`),i.config.util.getValue(i.config.ymq_option_branding.img,"--img-disabled-upper-url","")&&(this.optionHtml+=`<img class="ymq-disabled-img-up-img ymq-img-up-img" src="${i.config.util.getValue(i.config.ymq_option_branding.img,"--img-disabled-upper-url","")}" alt="">`),this.optionHtml+="\n\t\t\t\t\t    </label>\n\t\t\t\t \t")}return this.optionHtml+="\n\t\t\t\t</div>\n\t\t\t",i}creatDate(){var t=this;return t.optionHtml=`\n\t\t\t\t\t\n\t\t\t\t    <input class="ymq-input-text ${t.config.attrib_prefix}${t.selectedYmqOption.id}" data-price="0" readonly type="text" name="${t.creatName()}" id="${t.config.attrib_prefix}${t.selectedYmqOption.id}">\n\t\t\t`,t}creatMultipleName(t){return t}creatName(t=null){var i=this;return t?i.creatMultipleName(`properties[${t}]`):i.isShopify?"ymq-option"+(i.selectedYmqOption.optionsIndex- -1):-1!=bestJq.inArray(i.selectedYmqOption.label,i.needAddLabel)?i.creatMultipleName(`properties[${i.selectedYmqOption.label}-${i.selectedYmqOption.id.toString().split("tem").join("-")}]`):i.creatMultipleName(`properties[${i.selectedYmqOption.label}]`)}YmqGetDay(t=0){t=Number(t);var i=new Date;return i.setDate(i.getDate()+t),i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate()}initData(){var t=this,i={};i={theme:t.config.ymq_jedateblue,isToday:!1,onClose:!1,trigger:"click",language:t.config.ymq_enLang,format:t.selectedYmqOption.date_format,donefun:function(t){bestJq(t.elem).change()}},10==Number(t.selectedYmqOption.type)&&(i.range=" ~ ",i.multiPane=!1);var e="",n="";1==Number(t.selectedYmqOption.date_minDateType)?e=(new Date).Format("yyyy-MM-dd")+" ":2==Number(t.selectedYmqOption.date_minDateType)?""!=t.selectedYmqOption.min_date&&(e=t.selectedYmqOption.min_date+" "):3==Number(t.selectedYmqOption.date_minDateType)&&(e=t.YmqGetDay(t.config.util.getValue(t.selectedYmqOption,"min_days",1))),1==Number(t.selectedYmqOption.date_maxDateType)?n=(new Date).Format("yyyy-MM-dd")+" ":2==Number(t.selectedYmqOption.date_maxDateType)?""!=t.selectedYmqOption.max_date&&(n=t.selectedYmqOption.max_date+" "):3==Number(t.selectedYmqOption.date_maxDateType)&&(n=t.YmqGetDay(t.config.util.getValue(t.selectedYmqOption,"max_days",1))),e+t.selectedYmqOption.min_time!=""&&(i.minDate=e+t.selectedYmqOption.min_time),n+t.selectedYmqOption.max_time!=""&&(i.maxDate=n+t.selectedYmqOption.max_time);var a="";t.selectedYmqOption.day_limit.length>0&&(a="%"+t.selectedYmqOption.day_limit.join(",%"));var o="";return t.selectedYmqOption.weekly_limit.length>0&&(o="ymq"+(o=t.selectedYmqOption.weekly_limit.join("-"))),a+o!=""&&(i.valiDate=[a+o,!1]),window.ymq_option.jeDate("#"+t.config.attrib_prefix+t.selectedYmqOption.id,i),this}initDropdown(t=null){var i=this;return t||(t=bestJq("#"+i.config.attrib_prefix+i.selectedYmqOption.id)),t.dropdown({variantChange:function(t){t.hasClass("ymq-shopify-option")}}),i}initColpick(){var t=this;return bestJq("#"+t.config.attrib_prefix+t.selectedYmqOption.id).colpick({submit:0,onChange:function(t,i,e,n,a){bestJq(n).next().css("background","#"+i),bestJq(n).val("#"+i),bestJq(n).trigger("keyup")}}),t}initFile(){return this}setJson(t={},i={}){var e=this;return e.json=t,e.conditionJson=i,e}static getInstance(i){return this.instance||(this.instance=new t(i)),this.instance}},Product=class t{constructor(){var t=this;t.initConfig(),t.instance=null,t.variant=Variant.getInstance(),t.htmlBuilder=Html.getInstance(),t.validate=Validate.getInstance(),t.upload=Upload.getInstance(),t.init()}initMemberVariables(){var t=this;t.variantJson={},t.scriptArr=[],t.quantityDomInited=!1,t.conditionArr=[],t.formData={},t.selectedValue={},t.ymq_condition={},t.ymq_total_price=0,t.ymq_total_price_single=0,t.ymq_option_price=0,t.ymq_option_price_single=0,t.quantityback=0,t.ogFormData=new FormData,t.needchange=!0,t.paymentButtonDom=""}init(){this.initMemberVariables(),this.buildStyle().buildUploadModalDom().isShowBuyItNow().buildQuantityDom().hideShopifyDomAndRegisterAddCartEvent().disabledJqEvent().getShopifySelectDom().buildShopifyDom().buildYmqDom().buildVariantConditionName().hidePaymentButton().doCancelAjaxCart().buildShowAddTotalPriceInfoDom().buildAddToCartDom().disabledSubmit().registerDeleteFileViewEvent().registerInputChangeEvent().buildFormData()}isShowBuyItNow(){var t=this;t.config.hideByNow=!1;var i=bestJq(t.config.form_box).find("[name='id']");return 0==Number(i.length)?(console.log(1),t.config.hideByNow=!0,t):0==Number(t.config.util.getValue(t.config.ymq_option_branding.extra,"bunow","0"))?(console.log(1.1),t.config.hideByNow=!0,t):(t.config.hideByNow=window.ymq_option.hideByNow,t.config.cancelAjaxCart=window.ymq_option.cancelAjaxCart,console.log(t.config.hideByNow,t.config.cancelAjaxCart,21321312),t)}registerDeleteFileViewEvent(){var t=this;return bestJq(document).on("click",".ymq_upload_file_item_del",(function(){var i=bestJq(this),e=i.data("name"),n=i.data("num");t.upload.fileData.hasOwnProperty(e)&&t.upload.fileData[e].hasOwnProperty(n)&&delete t.upload.fileData[e][n],i.parents(".ymq-options-box").find('input[type="file"]').change().parents(".ymq_upload_new").removeClass("ymq_disabled"),i.parents(".ymq_upload_file_item").fadeOut().remove()})),t}buildUploadModalDom(){return this}de(t,i,e,n,a){if(t){var o={};if(ymq.$&&(o=ymq.$._data(t))&&o.events&&o.events[i])for(var r=0;r<o.events[i].length;r+=1)o.events[i][r].namespace!=n&&""!=n||(o.events[i][r].handler=function(){});if((o=bestJq._data(t))&&o.events&&o.events[i])for(r=0;r<o.events[i].length;r+=1)o.events[i][r].namespace!=n&&""!=n||(o.events[i][r].handler=function(){})}}disabledJqEvent(){var t=this;return t.intervalResult(1e4,100,(function(){return window.$&&$.fn&&$.fn.jquery?ymq.$=$:window.jQuery&&jQuery.fn&&jQuery.fn.jquery&&(ymq.$=jQuery),ymq.$?(t.buildQuantityDom(),console.log("shopify jq"),t.doAddCart(),!0):"complete"==document.readyState})),t}intervalResult(t,i,e,n){"function"==typeof t?(n=i,e=t,i=1e3,t=20):"function"==typeof i&&(n=e,e=i,i=1e3),"function"!=typeof e&&(e=function(){return!1});var a=0,o=setInterval((function(){++a>t||e(a)?clearInterval(o):"function"==typeof n&&n()}),i)}doCancelAjaxCart(){var t=this;return t.config.cancelAjaxCart||(bestJq(document).on("click","body",(function(i){t.I.each((function(){if(bestJq(this).length>0&&i.pageX>=bestJq(this).offset().left&&i.pageX<=bestJq(this).offset().left+bestJq(this).outerWidth()&&i.pageY>=bestJq(this).offset().top&&i.pageY<=bestJq(this).offset().top+bestJq(this).outerHeight())return t.controllerPaymentButton(!0,!0),!1}))})),t.controllerPaymentButton()),t}doAddCart(){var t=this,i=t.config.util.getValue(t.config.ymq_option_branding.extra,"cart-ajax","0");if(1==Number(i))return!1;if(!t.config.cancelAjaxCart)return!1;var e=bestJq(t.config.form_box);t.I.each((function(i,e){t.de(e,"click","namespace","","disable")})),t.I.on("click.ymq",(function(i){if(t.buildFormData(),t.validate.validateAll(t.formData,!0),0!=t.validate.validateCount)return!1;t.buildFormData();var n=bestJq(this);t.startLoading(n);var a=e.attr("action").match(/\/(\w{2})\/cart\/add/);if(t.getAjaxDataByFormData(),t.ogFormData.set("quantity",t.getQuantity()),t.ogFormData.set("id",bestJq("#ymq-variant-id").val()),t.config.variantOriginal){var o=t.config.util.getValue(t.config.ymq_option_branding.extra,"variant-id-dom","");o&&bestJq(o).length>0&&t.ogFormData.set("id",bestJq(o).val())}if(window.fbq){var r=0;if(t.config.variantData.hasOwnProperty(t.variant.variant_id)){var s=t.config.variantData[t.variant.variant_id],l=(r=s.price,{content_type:"product_group",content_ids:[t.config.product.id],currency:Shopify.currency.active,value:r/100+t.ymq_total_price,num_items:t.getQuantity(),content_name:s.title,content_category:t.config.product.type});"tecnologias-mjm.myshopify.com"==Shopify.shop?fbq("track","AddToCart",l,{event_id:t.ymqUUID()}):fbq("track","AddToCart",l),console.log("fbq done")}}bestJq.ajax({type:"POST",url:"/cart/add",enctype:"multipart/form-data",processData:!1,contentType:!1,cache:!1,data:t.ogFormData}).done((function(i){var e=t.config.util.getValue(t.config.ymq_option_branding.extra,"add-cart-url","");""==e?window.location.href=a?"/"+a[1]+"/cart":"/cart":0==e?location.reload():window.location.href=a?"/"+a[1]+`/${e}`:`/${e}`})).fail((function(i){if(console.log(i),t.config.variantData.hasOwnProperty(bestJq("#ymq-variant-id").val())){var e=t.config.variantData[bestJq("#ymq-variant-id").val()].name,a=t.config.util.getValue(t.config.ymq_option_branding.lan,"inventory_reminder","The product %s is already sold out.");alert(a.replace("%s",e))}t.endLoading(n)})),i.stopImmediatePropagation(),i.preventDefault()}))}ymqUUID(){for(var t=[],i="0123456789abcdef",e=0;e<36;e++)t[e]=i.substr(Math.floor(16*Math.random()),1);return t[14]="4",t[19]=i.substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]="-",t.join("")}hideShopifyDomAndRegisterAddCartEvent(){var t=this,i=t.config.util.getValue(t.config.ymq_option_branding.extra,"add-cart-form-number",0);if(Number(i)==i)var e=bestJq(t.config.form_box).eq(Number(i));else e=bestJq(i);for(var n=t.config.shop,a=Shopify.theme.name.toLowerCase(),o=null,r=t.config.product,s=(["slimedotnet.myshopify.com","ridesharegear.myshopify.com","shoretees-ca.myshopify.com","winspear-picks.myshopify.com","sallureofficial.myshopify.com","the-million-roses-romania.myshopify.com","eventtechrentals.myshopify.com","hocwoman.myshopify.com","wigirlhair.myshopify.com","petshopmalta.myshopify.com","the2tails-mermaid-tails.myshopify.com","gwyllem.myshopify.com","kirudansk.myshopify.com","us-jewels-gems.myshopify.com","neweditionshop.myshopify.com","olemasonjar.myshopify.com","ronniemac69.myshopify.com","3bdshop0004.myshopify.com","teddy-winthrop.myshopify.com"].indexOf(n),bestJq('\x3c!-- ymq custom product options by YMQ --\x3e\x3c!-- https://apps.shopify.com/ymq-options --\x3e<div id="ymq-box" class="ymq-box"></div>')),l=(e.find('[name="id"]'),bestJq('<select id="test1111" name="id" style="display: none;"></select>')),c=0;c<r.variants.length;c+=1)l.append('<option value="'+r.variants[c].id+'"></option>');var d,p=[".productForm-block--options-inline .selector-wrapper",".swatches__container","#variations-content-product-template > .selector-wrapper",".product__variants__wrap",'.variations [class^="nt_select_pr_"]',".product__selectors .selector-wrapper, .selector-wrapper-secton .selector-wrapper",".ProductForm__Option","> .product-options.no-options > .product-type","div.select:not(.shopify-select)",".inline-field-wrapper","> .row > .col-sm-12.col-xs-12",".row .col-md-6.col-sm-12",".product-details-wrapper .product-options","> .product-options .swatches","> .product-options",".radio-wrapper",".product-single__variant","table.variations",".selection-wrapper.variant .selector-wrapper",".selection-wrapper.variant",".details_wrapper .color_product__options, .details_wrapper .size_product__options, .details_wrapper .single_product__options",".product-options--mobile, .product-options--desktop",".product-options",".select-container",".product-single__swatch",".lh-swatch-images, .lh-swatch-simple",".selector-wrapper:not(.full-width):not(.quantity-product-template)",".gf_swatches-selector",".product-form__option",".product-form__item:not(.product-form__item--quantity):not(.product-form__item--submit):not(.product-form__quantity-selector)",".variant-wrapper, > .swatches","[data-product-options-contariner]",".form__control","div.option",".form__control","#product-variants",".option-selectors",".variant-group",".form-field-swatch",'[class*="medium-item-grid"] .item, [class*="small-item-grid"] .item',".col-md-6.col-sm-12.col-xs-12:not(.selector-wrapper)",".product-options .swatches",".swatches-container",".tt-swatches-container .tt-wrapper",".tt-swatches-container",".variant-option",".option-header, .option-values",".product-option-list",'div[class="input-row"]',".product-form__controls-group .pf-container",".product-form__item",".variations","div[data-product-options-container]","[data-product-options-container]",".gf_variants-wrapper",".product-form__variants",'[data-label="(P) Variants"]','[data-label="(P) Swatches"]','[data-pf-type="ProductVariant"]',"> .js-product-options",".form__input-wrapper--select",".prd-block_options",".materialize-select",".c-cartform__label",".product-page--variants",".variants",".so-product-variants-wrap",".gt_product-swatches",".product-form--variants .radios--root, .product-form--variants .disclosure--root",".product-details__options .product-details__option-wrapper",".product-form-option",".so-custom-field-wrap",".sh-product-options",".product-page-info__variants"],m=t.config.util.getValue(t.config.ymq_option_branding.extra,"theme-variant-class","");if(""!=m&&p.unshift(m),t.config.replace&&(d=bestJq(t.config.replace)),!d||!d.length)for(c=0;c<p.length;c+=1)if(0<(d=e.find(p[c])).length){".product-options--mobile, .product-options--desktop"===p[c]&&(d=d.add(e.find(".selector-wrapper:not(.full-width):not(.quantity-product-template)")));break}".product-form-wrapper .selector-wrapper"===p[c]&&setTimeout((function(){bestJq(".product-form-options-wrapper").removeClass("large--hide")}),1e4);var u=":not(.scr-open-size-chart):not([data-quantity-action]):not(.js-qty-button):not(.uploadkit-button):not(.accordion__header):not(.quantity--input__button):not(.btn-num-product-down):not(.btn-num-product-up)";if("loft"===a&&0<e.find('[name="add"], .add-to-cart-btn').length?o=e.find('[name="add"], .add-to-cart-btn'):0<e.find("input#pre-order[type=submit]").length?o=e.find("input#pre-order[type=submit]").first():0<e.find("button[name=add]:not(.dummy_button_for)").length?o=e.find("button[name=add]:not(.dummy_button_for)"):0<e.find("input.add_to_cart, button.add_to_cart").length?o=e.find("input.add_to_cart, button.add_to_cart").first():0<e.find("button.add-to-cart, button.ProductForm__AddToCart").length?o=e.find("button.add-to-cart, button.ProductForm__AddToCart").first():0<e.find(".addToCart").length?o=e.find(".addToCart").first():0<e.find('button[type="submit"]'+u+", input[type=submit]").length?o=e.find('button[type="submit"]'+u+", input[type=submit]"):0<e.find("button"+u).length?o=e.find("button"+u).first():0<e.find(".btn-addtocart").length?o=e.find(".btn-addtocart").first():0<e.find(".shg-btn, .paira-add-to-cart").length&&(o=e.find(".shg-btn, .paira-add-to-cart").first()),o){if(r&&("pf-atc-button"===o.attr("id")||o.is('[data-pf-type="ProductATC"]')))(s=bestJq("<button></button>")).html(o.html()),s.attr("class",o.attr("class")),o.replaceWith(s),o=s;setTimeout((function(){o.removeClass("disabled");try{o.attr("type","submit")}catch(t){}}),20)}if("optimizeinstagram.myshopify.com"===n?d=e.find(p[6]):"marei1998.myshopify.com"===n&&(d=e.find(".product-options label[for], .product-options label[for] + .select-wrapper")),o&&o.hasClass&&o.hasClass("shg-btn")){var y=bestJq('<button type="submit" style="border: 0;" class="shg-btn" id="'+o.get(0).id+'">ADD TO CART</button>');o.replaceWith(y),(o=y).click((function(t){e.submit()}))}if(0<d.length){t.config.replace=p[c],d.parent().removeClass("d-none").removeClass("hide-for-all");var f=d.first().find('select, input[type="radio"], input[type="checkbox"]').first();f.length&&bestJq._data(f.get(0),"events");".row .col-md-6.col-sm-12"!==p[c]&&".col-md-6.col-sm-12.col-xs-12:not(.selector-wrapper)"!==p[c]||s.find(".selector-wrapper").css({paddingLeft:15}),t.config.variantOriginal?d.last().css("marginBottom",Number(t.config.util.getValue(t.config.ymq_option_branding.extra,"variant-original-margin-bottom",0))).after(s):d.first().before(s),s.parent().hide(),s.parent().show(),s.parent().removeClass("hide"),s.parent().parent().hide(),s.parent().parent().show(),s.parent().removeClass("hidden"),".gf_variants-wrapper"===p[c]&&bestJq(p[c]+":first").closest('[data-label="(P) Variants"]').attr("id",""),s.last().after(e.find(".size-chart-link, .size-chart-container")),t.config.variantOriginal||d.each((function(t,i){0===bestJq(i).find('input[name="quantity"]:not(.product-single__swatch__input), input[type="text"]:not(.select-dropdown):not([disabled="disabled"]), input[type="number"], input[type="submit"], button:not([aria-controls="modal-bohobi-size-chart"]):not(.custom-style-select-box)').filter(':not(.ProductForm__Item):not(.Popover__Value):not(.Popover__Close):not([data-activates]):not(.product-option-quantity):not([id^="SingleOptionSelector-"]):not([aria-controls="modal-size-chart"])').length&&bestJq(i).hide()}))}else t.config.replace="no valid option found",e.prepend(s);var q=t.config.util.getValue(t.config.ymq_option_branding.extra,"hide-shopify-option","");""!=q&&bestJq(q).hide();var h=t.config.util.getValue(t.config.ymq_option_branding.extra,"product-hide","");""!=h&&bestJq(h).hide();var g=t.config.util.getValue(t.config.ymq_option_branding.extra,"product-show","");""!=g&&bestJq(g).show();var _=e.find(".product-form-grid.product-form-grid-select");_.length&&(_.first().after(_.find(".product-quantity-label, .product-quantity-input")),e.find(".swatch, .product-form-grid.product-form-grid-select, .fake-choice, .product-variants-radio-btns").hide(),bestJq(".product-single__meta > [itemscope] > .product-variants-item").hide());var b=t.config.util.getValue(t.config.ymq_option_branding.extra,"product-add-to-cart","");if(""!=b)var v=`${b},.shopify-payment-button__button [role="button"], .shopify-payment-button__button [role="button"] span, .sticky_atc_js`;else v='.shopify-payment-button__button [role="button"], .shopify-payment-button__button [role="button"] span, .sticky_atc_js';var w=bestJq('form[action*="/cart/add"]'),x=(w=w.not('.ssw-product-form, #add-item-qv, [id^="product-actions"], .product-form--mini, .ca-form')).find('[name="add"], .add-to-cart-btn,#addToCart');return x=x.add(o).add(v),t.I=x,t.doAddCart(),t}startLoading(t){t.addClass("ymq-btn-progress")}endLoading(t){t.removeClass("ymq-btn-progress")}controllerPaymentButton(t=!0,i=!1){var e=this;1==t&&e.buildFormData(),1==i?(e.validate.validateAll(e.formData,!0),0!=e.validate.validateCount?(bestJq(e.config.form_box).find(e.paymentButtonDom).css("pointerEvents","none"),e.I.css("pointerEvents","none")):(bestJq(e.config.form_box).find(e.paymentButtonDom).css("pointerEvents","auto"),e.I.css("pointerEvents","auto"))):e.validate.validateAllWithOutPrompt(e.formData)?(bestJq(e.config.form_box).find(e.paymentButtonDom).css("pointerEvents","none"),e.I.css("pointerEvents","none")):(bestJq(e.config.form_box).find(e.paymentButtonDom).css("pointerEvents","auto"),e.I.css("pointerEvents","auto"))}hidePaymentButton(){var t=this,i=t.config.util.getValue(t.config.ymq_option_branding.extra,"payment-button-hide","");if(!t.config.hideByNow)return t.paymentButtonDom='#dynamic-checkout-cart, .shopify-cleanslate, .additional-checkout-buttons,[data-shopify="payment-button"]',""!=i&&bestJq(t.config.form_box).find(i).length>0&&(t.paymentButtonDom=i),bestJq(document).on("click","body",(function(i){bestJq(t.config.form_box).find(t.paymentButtonDom).each((function(){if(bestJq(this).length>0&&i.pageX>=bestJq(this).offset().left&&i.pageX<=bestJq(this).offset().left+bestJq(this).outerWidth()&&i.pageY>=bestJq(this).offset().top&&i.pageY<=bestJq(this).offset().top+bestJq(this).outerHeight())return t.controllerPaymentButton(!0,!0),!1}))})),t.controllerPaymentButton(),t;var e="";return""!=i&&(e+=`\n\t\t\t\t\t${i}{\n\t\t\t\t\t\tdisplay: none!important;\n\t\t\t\t\t}\n\t\t\t\t`,bestJq(i).hide()),e+='\n\t\t\t\t#dynamic-checkout-cart, .shopify-cleanslate, .additional-checkout-buttons,[data-shopify="payment-button"]{\n\t\t\t\t\tdisplay: none!important;\n\t\t\t\t}\n\t\t\t',bestJq("#dynamic-checkout-cart, .shopify-cleanslate, .additional-checkout-buttons").hide(),bestJq('[data-shopify="payment-button"]').hide().remove(),bestJq(t.config.styleDomId).append(e),t}buildVariantConditionName(){var t=this,i=t.config.util.getValue(t.config.ymq_option_branding.extra,"variant-condition-label-class",""),e=t.config.util.getValue(t.config.ymq_option_branding.extra,"variant-condition-value-parent-class","");return t.config.variantOriginal&&""!=i&&""!=e&&bestJq(i).length>0&&bestJq(e).length>0||(i=".ymq-shopify-option-box .ymq-option-title .ymq_lable",e=".ymq-shopify-option-box"),bestJq(i).each((function(){bestJq(this).parents(e).attr("name",`option-box-ymq-variant-${t.config.util.htmlSpecialChars(bestJq(this).text()).trim()}`)})),this}buildStyle(){var t=this,i=":root{";Object.keys(t.config.ymq_option_branding).forEach((function(e){"lan"!=e&&"extra"!=e&&Object.keys(t.config.ymq_option_branding[e]).forEach((function(n){i+=`\n\t\t\t\t\t\t${n}: ${t.config.ymq_option_branding[e][n]};\n\t\t\t\t\t`}))})),i+="}";var e=t.config.util.getValue(t.config.ymq_option_branding.extra,"title-value","1,2,9,10");(e=e.split(",")).push(18,19);var n=[];e.forEach((function(t){n.push(`.ymq-options-box-${t} .ymq_option_text_span`)})),i+=`\n\t\t\t\t${n.join(",")}{\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\t\t\t`,i+=t.config.util.getValue(t.config.ymq_option_branding.extra,"extra-style-code",""),bestJq(t.config.styleDomId).html(i);var a=`<style type="text/css">${t.config.util.getValue(t.config.ymq_option_branding.extra,"customecss","")}</style>`;return bestJq("body").append(a),t}buildShopifyDom(){var t=this;return t.config.variantOriginal||t.variant.buildVariantHtml().isSoldOut(),t}buildYmqDom(){var t=this;return t.config.ymqHook("buildYmqDom_b"),t.htmlBuilder.setJson(t.config.ymq_option_data,t.config.ymq_option_condition).buildtHtml(),t.config.ymqHook("buildYmqDom_a"),t}disabledSubmit(){var t=this;return t.config.hideByNow?(bestJq(t.config.form_box).submit((function(t){return t.preventDefault(),!1})),t):t}buildAddToCartDom(){var t=this;return t}getQuantity(){return parseInt(this.quantityDom.val())||1}reSetQtyByRadioValue(){var t=this.getQuantityGradeByRadioInput();null!=t&&this.setQuantity(t.quantity)}setQuantity(t){return isNaN(t)&&(t=1),t<1&&(t=1),this.quantityDom.val(t),this}setQuantityByQty(){var t=this;if(t.config.quantity_is_fix_type){var i=t.getQuantity();if(null!=(n=t.getQuantityGradeByRadioInput())){var e=n.quantity;i>e&&(bestJq(".ymq-quantity-radio:checked").parents(".ymq-quantity-radio-box").next(".ymq-quantity-radio-box").find(".ymq-quantity-radio").trigger("click"),t.reSetQtyByRadioValue()),i<e&&(bestJq(".ymq-quantity-radio:checked").parents(".ymq-quantity-radio-box").prev(".ymq-quantity-radio-box").find(".ymq-quantity-radio").trigger("click"),t.reSetQtyByRadioValue())}}else{var n,a=t.getQuantity();a=parseInt(a),isNaN(a)&&(a=1),!isNaN(t.config.min_quantity)&&a<t.config.min_quantity&&(a=t.config.min_quantity),!isNaN(t.config.max_quantity)&&a>t.config.max_quantity&&(a=t.config.max_quantity),t.setQuantity(a),null!=(n=t.getQuantityGradeByQtyInput())&&(0==bestJq(`.ymq-quantity-radio-${n.quantity}`).length?bestJq(".ymq-quantity-radio:checked").attr("checked",!1).prop("checked",!1):bestJq(`.ymq-quantity-radio-${n.quantity}`).attr("checked")&&bestJq(`.ymq-quantity-radio-${n.quantity}`).prop("checked")||(t.needchange=!1,bestJq(`.ymq-quantity-radio-${n.quantity}`).trigger("click")))}}setQuantityByRadio(){var t=this,i=t.getQuantityGradeByRadioInput();return null!=i?t.setQuantity(i.quantity):isNaN(t.config.min_quantity)?t.setQuantity(1):t.setQuantity(t.config.min_quantity),t}getShopifyJqDom(t){return ymq.$?ymq.$(t):bestJq(t)}buildQuantityDom(){var t=this,i=t.config.util.getValue(t.config.ymq_option_branding.extra,"show-quantity","");if(""!=i&&bestJq(i).length>0)var e=t.getShopifyJqDom(i);else e=t.getShopifyJqDom(`${t.config.form_box} [name="quantity"]`);if(e.length>=1)t.quantityDom=e,console.log(t.quantityDom,2233);else{if(!t.quantityDomInited){if(0==t.config.util.getValue(t.config.ymq_option_branding.extra,"quantity-box",1))var n=`\n\t\t\t\t\t\t\t<div id="${t.config.quantity_box}" style="display: none!important;">\n\t\t\t\t\t\t\t\t<input id="${t.config.quantity_input}" value="1" readonly type="hidden">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t`;else n=`\n\t\t\t\t\t\t\t<div id="${t.config.quantity_box}">\n\t\t\t\t\t\t\t\t<div class="${t.config.quantity_change}" data-type="cut" id="${t.config.quantity_add}">-</div>\n\t\t\t\t\t\t\t\t<input id="${t.config.quantity_input}" name="quantity" value="1" type="text">\n\t\t\t\t\t\t\t\t<div class="${t.config.quantity_change}" data-type="add" id="${t.config.quantity_cut}">+</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t`;bestJq("#ymq-box").append(n),t.quantityDomInited=!0}t.quantityDom=t.getShopifyJqDom(`#${t.config.quantity_input}`),console.log(t.config.quantity_has_value),t.config.quantity_is_fix_type&&t.config.quantity_has_value&&t.quantityDom.attr("readonly",!0).prop("readonly",!0),console.log(t.quantityDom,1122)}return t.registerQuantityChangeEvent(),t.setQuantityByRadio(),t}buildShowAddTotalPriceInfoDom(){var t=this,i=t.config.util.getValue(t.config.ymq_option_branding.extra,"product-price-in-product-page",""),e=t.config.util.getValue(t.config.ymq_option_branding.extra,"product-compare-at-price-in-product-page","");if(!(""!=i&&bestJq(i).length>0||""!=e&&bestJq(e).length>0)){var n=`\n\t\t\t\t\t<div id="ymq-price-addons">\n\t\t\t\t\t\t${t.config.ymq_option_branding.lan.add_price_text.replace("%s",'<span id="ymq-addons-price"></span>')}\n\t\t\t\t\t</div>\n\t\t\t\t`;bestJq("#ymq-box").append(n)}return t}registerQuantityChangeEvent(){var t=this,i=t.config.util.getValue(t.config.ymq_option_branding.extra,"quantity-change","");return bestJq(".ymq-quantity-change").each((function(i,e){t.de(e,"click","namespace","","disable")})),t.quantityDom.each((function(i,e){t.de(e,"change","namespace","ymq","disable")})),""!=i&&bestJq(i).each((function(i,e){t.de(e,"click","namespace","ymq","disable")})),bestJq(".ymq-quantity-change").on("click",(function(){console.log(".ymq-quantity-change 点击");var i=-1;"add"==bestJq(this).data("type")&&(i=1);var e=t.getQuantity();e=Number(e),e+=i,t.setQuantity(e),t.quantityDom.change()})),""!=i&&bestJq(i).on("click.ymq",(function(){t.quantityDom.change()})),t.quantityDom.on("change.ymq",(function(){console.log("执行change"),t.quantityChange()})),this}quantityChange(){this.setQuantityByQty(),this.buildFormData()}getQuantityGradeByQtyInput(){var t=this.getQuantity();return this.doGetQuantityGrade(t)}getQuantityGradeByRadioInput(){var t=bestJq(".ymq-quantity-radio:checked").val();return this.doGetQuantityGrade(parseInt(t))}doGetQuantityGrade(t){var i=this,e=null;if(i.config.hasQuantity&&i.config.quantity_has_value)if(i.config.quantity_is_fix_type)try{Object.keys(i.config.quantity.options).forEach((function(n){if(t==n)throw e=i.config.quantity.options[n],new Error("breakForEach")}))}catch(t){if("breakForEach"!=t.message)throw t}else try{Object.keys(i.config.quantity.options).forEach((function(n){if(t>=n&&t<=i.config.quantity.options[n].quantity_max)throw e=i.config.quantity.options[n],new Error("breakForEach")}))}catch(t){if("breakForEach"!=t.message)throw t}return e}getShopifySelectDom(){var t=this;bestJq(t.config.form_box).css("cssText","display:block !important;");var i=[],e=[],n=[],a=[];return bestJq(t.config.form_box).find("select").each((function(){i=[],e=[],n=[];var a=bestJq(this);bestJq(this).find("option").each((function(){i.push(bestJq(this).html()),e.push(bestJq(this).val()),n.push(t.config.util.htmlSpecialChars(bestJq(this).val()))})),Object.keys(t.config.ymq_shopify_options).forEach((function(o,r){t.config.shopifySelectDom.hasOwnProperty(o)||JSON.stringify(t.config.ymq_shopify_options[o])!=JSON.stringify(i)&&JSON.stringify(t.config.ymq_shopify_options[o])!=JSON.stringify(e)&&JSON.stringify(t.config.ymq_shopify_options[o])!=JSON.stringify(n)||(t.config.shopifySelectDom[o]={},t.config.shopifySelectDom[o].jq=a,t.config.shopifySelectDom[o].type="select",a.attr("id")?t.config.shopifySelectDom[o].id=a.attr("id"):(t.config.shopifySelectDom[o].id=`ymq_shopify_select_id_${o}`,a.attr("id",`ymq_shopify_select_id_${o}`)))}))})),bestJq(t.config.form_box).find(":radio").each((function(){a.push(bestJq(this).attr("name"))})),(a=bestJq.unique(a)).forEach((function(i){e=[],n=[],bestJq("input[name='"+i+"']").each((function(){e.push(bestJq(this).val()),n.push(t.config.util.htmlSpecialChars(bestJq(this).val()))}));var a=bestJq("input[name='"+i+"']");Object.keys(t.config.ymq_shopify_options).forEach((function(o,r){t.config.shopifySelectDom.hasOwnProperty(o)||JSON.stringify(t.config.ymq_shopify_options[o])!=JSON.stringify(e)&&JSON.stringify(t.config.ymq_shopify_options[o])!=JSON.stringify(n)||(t.config.shopifySelectDom[o]={},t.config.shopifySelectDom[o].jq=a,t.config.shopifySelectDom[o].type="radio",t.config.shopifySelectDom[o].name=i)}))})),t}registerInputChangeEvent(){var t=this;return bestJq(t.config.form_box).find('input[type="text"],input[type="number"],textarea').on("keyup",(function(){var i=bestJq(this).parents(".ymq-options-box");t.buildFormData().validateOne(i),t.config.hideByNow&&t.config.cancelAjaxCart||t.controllerPaymentButton(!1)})),bestJq(document).on("change",'form[action*="/cart/add"] input,form[action*="/cart/add"] select',(function(){if(bestJq(this).hasClass("ymq-shopify-option")&&(t.variant.isSoldOut(),t.variant.changeUriByVariantId()),t.config.variantOriginal){var i=t.config.util.getUrlParam("variant");i&&(t.variant.variant_id=i,t.variant.changeVariantId())}var e=bestJq(this).parents(".ymq-options-box");t.buildFormData().validateOne(e),t.config.hideByNow&&t.config.cancelAjaxCart||t.controllerPaymentButton(!1)})),bestJq(document).on("change",".ymq-quantity-radio",(function(){t.needchange&&t.setQuantityByRadio().buildFormData(),t.needchange=!0})),t}validateOne(t){var i=this,e=t.data("name");return i.validate.validateOne(i.formData[e]),i}validateAll(t=!1){var i=this;return i.validate.validateAll(i.formData,t),i}registerBuyItNowEvent(){var t=this;return bestJq("body").on("click",`#${t.config.buy_id_now}`,(function(){if(t.validate.validateAll(t.formData,!0),0!=t.validate.validateCount)return!1;var i={};i.item_count=bestJq(`#${t.config.quantity_input}`).val(),i.items=[];var e={};e.variant_id=t.variant.variant_id,e.quantity=i.item_count,e.product_id=t.config.product.id,e.product_title=t.config.product.title,e.line_price=t.config.variantData[t.variant.variant_id].price*i.item_count,e.properties=t.getAjaxDataByFormData(!0),i.items.push(e),bestJq.ajax({type:"POST",url:"https://option.ymq.cool/api/checkout",data:{data:i,shop:t.config.shop,token:t.config.token,timestamp:t.config.timestamp,customer_id:t.config.customer_id},dataType:"json",success:function(t){window.location.href=t.data},error:function(t){}})})),t}getAjaxDataByFormData(t=!1){var i=this,e={};return i.ogFormData=new FormData,Object.keys(i.formData).forEach((function(n){if(0!=i.formData[n].value.length||i.formData[n].hasOwnProperty("isFile")){i.selectedValue=i.formData[n];var a=i.selectedValue.value.join(",");if(Number(0)>0&&(a+=` | ${i.config.doFormat(0,i.selectedValue.onetime)}`),t)e[n.substring(11,n.length-1)]=a;else if(i.formData[n].hasOwnProperty("isFile")){if(i.upload.fileData.hasOwnProperty(n)){var o=Object.keys(i.upload.fileData[n]).length;o>0&&Object.keys(i.upload.fileData[n]).forEach((function(t,e){i.ogFormData.set(1==o?n:i.reCreatName(n,e),i.upload.fileData[n][t].file,i.upload.fileData[n][t].name)}))}}else i.ogFormData.set(n,a),e[n]=a}})),e}reCreatName(t=null,i=0){return`properties[${t=t.substring(11,t.length-1)}_${i}]`}registerAddToCartEvent(){var t=this;return bestJq("body").on("click",`#${t.config.add_to_cart}`,(function(){if(t.validate.validateAll(t.formData,!0),0!=t.validate.validateCount)return!1;bestJq(this).addClass("ymq-btn-progress");var i=t.getAjaxDataByFormData();i.id=bestJq("#ymq-variant-id").val(),i.quantity=t.getQuantity(),bestJq.ajax({type:"POST",url:"/cart/add.js",data:i,dataType:"json",success:function(t){window.location.href="/cart"},error:function(t){bestJq(this).removeClass("ymq-btn-progress")}})})),t}getMultiple(t){return-1!=this.config.multipleTypeArray.indexOf(Number(t))}buildFormData(){var t=this;t.config.ymqHook("buildFormData_b"),t.formData={},bestJq(t.config.form_box).find(".ymq-options-box").each((function(){var i=bestJq(this).data("name"),e=Number(bestJq(this).data("type")),n=bestJq(this).data("class"),a=Number(bestJq(this).data("onetime"));window.ymq_option.ymq_option_branding.extra.plan<2&&(a=0);var o={},r=bestJq(this).find(`.${n}`),s=bestJq(this).find(`.${n}:disabled`),l=bestJq(this).data("validate");if(18==e||19==e){var c=t.getQuantityGradeByQtyInput();if(null!=c){var d=t.config.util.getValue(t.config.ymq_option_branding.lan,"qty-rang","qtyRange"),p=t.config.util.getValue(t.config.ymq_option_branding.lan,"qty-discount","discount"),m=t.config.util.getValue(t.config.ymq_option_branding.lan,"qty-discount-type","discountType"),u=t.config.util.getValue(t.config.ymq_option_branding.lan,"qty-discount-type-percentage","percentage"),y=t.config.util.getValue(t.config.ymq_option_branding.lan,"qty-discount-type-fixed","fixed"),f=t.config.util.getValue(t.config.ymq_option_branding.lan,"max-quantity","999999"),q=`${d}: ${c.quantity} - ${999999==Number(c.quantity_max?c.quantity_max:c.quantity)?f:Number(c.quantity_max?c.quantity_max:c.quantity)} | ${p}: ${c.discount} | ${m}: ${1==Number(c.discount_type)?u:y}`;o={onetime:0,price:0,validate:"",value:[q]}}else if(!(19!=e||isNaN(t.config.min_quantity)&&isNaN(t.config.max_quantity))){var h=1,g=t.config.max_num;isNaN(t.config.min_quantity)||(h=t.config.min_quantity),isNaN(t.config.max_quantity)||(g=t.config.max_quantity);d=t.config.util.getValue(t.config.ymq_option_branding.lan,"qty-rang","qtyRange");o={onetime:0,price:0,validate:"",value:[q=`${d}: ( ${h} - ${g} ) `]}}}else if(1==r.length){if(!r.prop("disabled"))if(o.onetime=a,7==e||3==e){o.value=[];var _=0;bestJq(this).find("option").each((function(){bestJq(this).prop("selected")&&(o.value.push(bestJq(this).val()),bestJq(this).data("price")&&(_-=-Number(bestJq(this).data("price"))))})),o.price=_,o.validate=l}else if(!0,"radio"==r.attr("type")||"checkbox"==r.attr("type")){o.value=[];_=0;r.prop("checked")&&(o.value.push(r.val()),r.data("price")&&(_-=-Number(r.data("price")))),o.price=_,o.validate=l}else if("file"==r.prop("type")){if(o.value=[],""!=t.config.util.getValue(t.config.ymq_option_branding.extra,"upload-num-prompt","")){var b=0;t.upload.fileData.hasOwnProperty(i)&&(b=Object.keys(t.upload.fileData[i]).length),o.value.push(`(${b} / ${r.data("file-num")})`)}o.price=0,0!=o.value.length&&(o.price=r.data("price")?Number(r.data("price")):0),o.isFile=!0,o.name=i,o.validate=l}else o.value=""==r.val()?[]:[r.val()],o.price=0,0!=o.value.length&&(o.price=r.data("price")?Number(r.data("price")):0),o.validate=l}else if(r.length!=s.length){o.onetime=a,o.value=[];_=0;r.each((function(){bestJq(this).prop("disabled")||bestJq(this).prop("checked")&&(o.value.push(bestJq(this).val()),bestJq(this).data("price")&&(_-=-Number(bestJq(this).data("price"))))})),o.price=_,o.validate=l}if(!bestJq.isEmptyObject(o)){o.dom=r.eq(0),t.selectedValue=o;var v=t.selectedValue.value.join(",");if(Number(0)>0&&(v+=` | ${t.config.doFormat(0,a,!0)}`),Number(0)>0){var w=t.config.util.getValue(t.config.ymq_option_branding.extra,"title-value","1,2,9,10");w=w.split(","),(bestJq.inArray(e,w)>=0||bestJq.inArray(e.toString(),w)>=0)&&bestJq(this).find(".ymq_option_price_span").html(t.config.doFormat(0,a,!0))}else bestJq(this).find(".ymq_option_price_span").html("");bestJq(this).find(".ymq_option_text_span").html(v),bestJq(this).hasClass("ymq-shopify-option-box")||(t.formData[i]=o)}})),t.ymq_total_price=0,t.ymq_total_price_single=0,t.ymq_option_price=0,t.ymq_option_price_single=0;var i=t.getQuantity();return Object.keys(t.formData).forEach((function(e){1==Number(t.formData[e].onetime)?(t.ymq_total_price=Number(t.ymq_total_price)+Number(t.formData[e].price),t.ymq_option_price_single=Number(t.ymq_option_price_single)+Number(t.formData[e].price)):(t.ymq_total_price=Number(t.ymq_total_price)+Number(t.formData[e].price)*i,t.ymq_option_price=Number(t.ymq_option_price)+Number(t.formData[e].price)),t.ymq_total_price_single=Number(t.ymq_total_price_single)+Number(t.formData[e].price)})),t.price(),t.buildQuantityDiscount(),t.config.ymqHook("buildFormData_a"),t}buildQuantityDiscount(){var t=this,i=t.config.variantData[t.variant.variant_id].price,e=t.config.util.getValue(t.config.ymq_option_branding.lan,"q-save","Save");return bestJq(".ymq-quantity-radio-box").each((function(){var n,a=0,o=2,r=1,s=0;if(bestJq(this).hasClass("ymq-quantity-show-box")){var l=t.getQuantityGradeByQtyInput();null!=l?(bestJq(this).show(),a=Number(l.discount),o=Number(l.discount_type),r=t.getQuantity(),bestJq(this).find(".ymq-quantity-buy-quantity").html(r),1==o?bestJq(this).find(".ymq-quantity-discount").html(`${e} ${a}%`):bestJq(this).find(".ymq-quantity-discount").html(`-${t.config.doFormat(a)}`)):bestJq(this).hide()}else a=Number(bestJq(this).find(".ymq-quantity-discount-price").data("discount")),o=Number(bestJq(this).find(".ymq-quantity-discount-price").data("discount_type")),r=Number(bestJq(this).find(".ymq-quantity-discount-price").data("quantity"));n=(Number(i)/100+Number(t.ymq_option_price))*r+Number(t.ymq_option_price_single),s=1==o?n*(1-a/100):n-a,bestJq(this).find(".ymq-quantity-discount-price").html(t.config.doFormat(s)),bestJq(this).find(".ymq-quantity-compared-price,.ymq-quantity-compared-price-no-discount").html(t.config.doFormat(n))})),t}price(){var t=this,i=t.config.util.getValue(t.config.ymq_option_branding.extra,"product-price-in-product-page",""),e=t.config.util.getValue(t.config.ymq_option_branding.extra,"product-compare-at-price-in-product-page","");if(""!=i&&bestJq(i).length>0||""!=e&&bestJq(e).length>0){if(t.config.variantData.hasOwnProperty(t.variant.variant_id)){var n=t.config.variantData[t.variant.variant_id],a=n.price,o=n.compare_at_price;console.log(a,i,bestJq(i).length),""!=i&&bestJq(i).length>0&&bestJq(i).html(t.config.doFormat((100*Number(t.ymq_total_price_single)+Number(a))/100)),console.log(o,e,bestJq(e).length),""!=e&&bestJq(e).length>0&&o&&bestJq(e).html(t.config.doFormat((100*Number(t.ymq_total_price_single)+Number(o))/100))}}else 0==Number(t.ymq_total_price)?bestJq("#ymq-price-addons").slideUp(300,"swing"):bestJq("#ymq-price-addons").slideDown(300,"swing"),bestJq("#ymq-addons-price").html(t.config.doFormat(t.ymq_total_price,0,!0));return t}initConfig(){var t=this;if(t.config=Config.getInstance(),t.config.shop=window.ymq_option.shop,t.config.token=window.ymq_option.token,t.config.timestamp=window.ymq_option.timestamp,t.config.customer_id=window.ymq_option.customer_id,t.config.product=window.ymq_option.product,t.config.ymq_shopify_options=window.ymq_option.ymq_shopify_options,t.config.money_format=window.ymq_option.ymq_option_branding.lan.currency,t.config.form_box="",t.config.shopifySelectDom=[],bestJq('form[action="/cart/add"]').length>=1)t.config.form_box='form[action="/cart/add"]';else if(bestJq('form[action*="/cart/add"]').length>=1){var i=bestJq('form[action*="/cart/add"]').attr("action");t.config.form_box=`form[action="${i}"]`}t.config.util.getUrlParam("ymq_view")?(t.config.ymq_variantjson=window.ymq_option.ymq_variantjson_yulan,t.config.ymq_option_data=window.ymq_option.ymq_option_data_yulan,t.config.ymq_option_condition=window.ymq_option.ymq_option_condition_yulan,t.config.ymq_option_template=window.ymq_option.ymq_option_template_yulan,t.config.ymq_option_template_condition=window.ymq_option.ymq_option_template_condition_yulan):(t.config.ymq_variantjson=window.ymq_option.ymq_variantjson,t.config.ymq_option_data=window.ymq_option.ymq_option_data,t.config.ymq_option_condition=window.ymq_option.ymq_option_condition,t.config.ymq_option_template=window.ymq_option.ymq_option_template,t.config.ymq_option_template_condition=window.ymq_option.ymq_option_template_condition),console.log(t.config.ymq_option_data),t.config.ymq_option_settings=window.ymq_option.ymq_option_settings,t.config.ymq_option_branding=window.ymq_option.ymq_option_branding,t.config.ymq_has_only_default_variant=window.ymq_option.ymq_has_only_default_variant,t.config.variantData={},t.config.product.variants.forEach((function(i){t.config.variantData[i.id]=i})),t.config.variantOriginal=!1,1==t.config.util.getValue(t.config.ymq_option_branding.extra,"variant-original",0)&&(t.config.variantOriginal=!0),t.config.onetimetag=` ( ${t.config.util.getValue(t.config.ymq_option_branding.lan,"one-time-tag","one time")} )`}static getInstance(){return this.instance||(this.instance=new t),this.instance}},Upload=class t{constructor(){this.instance=null,this.init()}init(){this.disabledFileInput().initMemberVariables().initModal().initOptions().registerEvent(),this.registerFileInputChangeEvent()}initMemberVariables(){var t=this;return t.cropper=null,t.files=null,t.num=0,t.fileData={},t.rectangleRatios=[],t.formData=new FormData,t.inputDom=null,t.previewReady=!1,t.imgDom=null,t}disabledFileInput(){return bestJq(document).on("click",".ymq_upload_new.ymq_disabled",(function(t){return t.stopImmediatePropagation(),t.preventDefault(),!1})),this}initOptions(){var t=this;return t.options={ready:function(){var i=this.cloneNode();i.className="",i.style.cssText="display: block;width: 100%;min-width: 0;min-height: 0;max-width: none;max-height: none;",bestJq(".ymq-img-review")[0].appendChild(i.cloneNode()),t.previewReady=!0},dragMode:"move",isRound:!1,crop:function(i){if(t.previewReady){var e=i.detail,n=this.cropper.getImageData(),a=e.width/e.height,o=bestJq(".ymq-img-review")[0];if(o){var r=o.getElementsByTagName("img").item(0),s=o.offsetWidth,l=s/a,c=e.width/s;o.style.height=l+"px",r&&(r.style.width=n.naturalWidth/c+"px",r.style.height=n.naturalHeight/c+"px",r.style.marginLeft=-e.x/c+"px",r.style.marginTop=-e.y/c+"px")}}}},t}resetAspectRatio(t){var i=this;return 2==(t=t.split(":")).length?(t=t[0]/t[1],i.options.aspectRatio=t):delete i.options.aspectRatio,i}registerEvent(){var t=this;return bestJq(document).on("click",".ymq-cropper-button-resize",(function(){t.destroyCropper().resetAspectRatio(bestJq(this).data("aspect-ratio")).newCropper()})),bestJq(document).on("click",".ymq-cropper-rotate-left",(function(){t.cropper.rotate(-30)})),bestJq(document).on("click",".ymq-cropper-rotate-right",(function(){t.cropper.rotate(30)})),t.modal.find("#ymq-do-cropper").on("click",(function(){if(t.cropper){t.getCanvas().toDataURL("image/jpeg",1);t.getCanvas().toBlob((function(i){t.addImg(i)}))}})),t}destroyCropper(){var t=this;return t.cropper.destroy(),t.cropper=null,t}newCropper(){var t=this;return t.cropper=new Cropper(t.imgDom[0],t.options),t.modal.resize(),t}initRectangleRatio(){var t=this;t.rectangleRatios=[],t.resetAspectRatio("");var i=t.inputDom.data("rectangle-ratio");i&&(i=i.split(",")).length>0&&(t.rectangleRatios=i,t.resetAspectRatio(t.rectangleRatios[0])),t.options.isRound=!1,bestJq(".ymq-img-container").removeClass("cropper-container-round"),2==t.inputDom.data("cropper")&&(t.resetAspectRatio("1:1"),bestJq(".ymq-img-container").addClass("cropper-container-round"));var e="";return t.rectangleRatios.forEach((function(t){e+=`<div class="ymq-cropper-button ymq-cropper-button-resize" data-aspect-ratio="${t}">${t}</div>`})),t.modal.find(".ymq-img-action_m").html(e),t.modal.find(".ymq-img-action_pc").html(e),t}getCanvas(){var t=this;if(2==t.inputDom.data("cropper")){var i=t.cropper.getCroppedCanvas(),e=document.createElement("canvas"),n=e.getContext("2d"),a=i.width,o=i.height;return e.width=a,e.height=o,n.imageSmoothingEnabled=!0,n.drawImage(i,0,0,a,o),n.globalCompositeOperation="destination-in",n.beginPath(),n.arc(a/2,o/2,Math.min(a,o)/2,0,2*Math.PI,!0),n.fill(),e}return t.cropper.getCroppedCanvas()}registerFileInputChangeEvent(){var t=this;return bestJq(document).on("change",'form[action="/cart/add"] input[type="file"]',(function(i){if(t.inputDom=bestJq(this),t.files=i.target.files,t.inputDom.val()){0!=t.inputDom.data("cropper")?t.initRectangleRatio().doCropper():t.addFile();var e="";e+='<div class="ymq-cropper-button ymq-cropper-rotate-left"><svg t="1625460890766" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6401" width="16" height="16"><path d="M950.930517 512q0 89.161143-34.889143 170.276571t-93.696 139.995429-139.995429 93.696-170.276571 34.889143q-98.304 0-186.88-41.398857t-150.820571-116.882286q-4.022857-5.705143-3.730286-12.873143t4.827429-11.702857l78.262857-78.848q5.705143-5.12 14.262857-5.12 9.142857 1.170286 13.165714 6.875429 41.691429 54.272 102.253714 83.968t128.585143 29.696q59.465143 0 113.444571-23.113143t93.403429-62.537143 62.537143-93.403429 23.113143-113.444571-23.113143-113.444571-62.537143-93.403429-93.403429-62.537143-113.444571-23.113143q-56.027429 0-107.446857 20.260571t-91.428571 58.002286l78.262857 78.848q17.700571 17.115429 7.972571 39.424-9.728 22.820571-33.718857 22.820571l-256 0q-14.848 0-25.746286-10.825143t-10.825143-25.746286l0-256q0-23.990857 22.820571-33.718857 22.308571-9.728 39.424 7.972571l74.313143 73.728q61.147429-57.709714 139.702857-89.453714t162.596571-31.744q89.161143 0 170.276571 34.889143t139.995429 93.696 93.696 139.995429 34.889143 170.276571z" p-id="6402" fill="#ffffff"></path></svg></div><div class="ymq-cropper-button ymq-cropper-rotate-right"><svg t="1625461123473" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6636" width="16" height="16"><path d="M950.857143 146.285714l0 256q0 14.857143-10.857143 25.714286t-25.714286 10.857143l-256 0q-24 0-33.714286-22.857143-9.714286-22.285714 8-39.428571l78.857143-78.857143q-84.571429-78.285714-199.428571-78.285714-59.428571 0-113.428571 23.142857t-93.428571 62.571429-62.571429 93.428571-23.142857 113.428571 23.142857 113.428571 62.571429 93.428571 93.428571 62.571429 113.428571 23.142857q68 0 128.571429-29.714286t102.285714-84q4-5.714286 13.142857-6.857143 8 0 14.285714 5.142857l78.285714 78.857143q5.142857 4.571429 5.428571 11.714286t-4.285714 12.857143q-62.285714 75.428571-150.857143 116.857143t-186.857143 41.428571q-89.142857 0-170.285714-34.857143t-140-93.714286-93.714286-140-34.857143-170.285714 34.857143-170.285714 93.714286-140 140-93.714286 170.285714-34.857143q84 0 162.571429 31.714286t139.714286 89.428571l74.285714-73.714286q16.571429-17.714286 40-8 22.285714 9.714286 22.285714 33.714286z" p-id="6637" fill="#ffffff"></path></svg></div>',t.modal.find(".ymq-img-action_m").append(e),t.modal.find(".ymq-img-action_pc").append(e)}})),t}doCropper(){var t,i,e=this;e.files&&e.files.length>0&&(t=e.files[0],/^image\/\w+/.test(t.type)?URL?e.done(URL.createObjectURL(t)):FileReader&&((i=new FileReader).onload=function(t){e.done(i.result)},i.readAsDataURL(t)):e.addFile())}done(t){var i=this;i.inputDom.val(""),i.imgDom.prop("src",t),i.modal.modal("show")}isDisabled(){var t=this,i=t.inputDom.prop("name"),e=t.inputDom.data("file-num"),n=0;t.fileData.hasOwnProperty(i)&&(n=Object.keys(t.fileData[i]).length),n>=e?t.inputDom.parents(".ymq_upload_new").addClass("ymq_disabled"):t.inputDom.parents(".ymq_upload_new").removeClass("ymq_disabled")}addFile(){var t=this,i="",e=t.inputDom.prop("name"),n=t.inputDom.parents(".ymq-options-box").find(".ymq_upload_img_view"),a=t.inputDom.parents(".ymq-options-box").find(".ymq_upload_file_view"),o=t.inputDom.data("file-num"),r=t.files.length,s="";t.fileData.hasOwnProperty(e)||(t.fileData[e]={}),(o-=Object.keys(t.fileData[e]).length)<=t.files.length&&(r=o);for(let o=0;o<r;o++)t.fileData[e][t.num]={file:t.files[o],name:t.files[o].name},/^image\/\w+/.test(t.files[o].type)?(URL&&(i=URL.createObjectURL(t.files[o])),s=`\n\t\t\t\t\t\t<div class="ymq_upload_img_item ymq_upload_file_item ymq_upload_file_item_${t.num}" style="display: none;" data-name="${e}" data-num="${t.num}">\n\t\t\t\t\t\t\t<img class="ymq_img_item" src="${i}" alt="">\n\t\t\t\t\t\t\t<div class="ymq_upload_img_item_bg">\n\t\t\t\t\t\t\t\t<span data-name="${e}" data-num="${t.num}" class="ymq_upload_img_item_del ymq_upload_file_item_del"></span>\n\t\t\t\t\t\t\t\t<div class="spotlight" data-src="${i}"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`,n.prepend(s),bestJq(`.ymq_upload_file_item_${t.num}`).fadeIn()):(s=`\n\t\t\t\t\t\t<div class="ymq_upload_item ymq_upload_file_view ymq_upload_file_item ymq_upload_file_item_${t.num}">\n\t\t\t\t\t\t\t<div class="ymq_upload_type ymq_upload_img"></div>\n\t\t\t\t\t\t\t<div class="ymq_upload_name">${t.files[o].name}</div>\n\t\t\t\t\t\t\t<div data-name="${e}" data-num="${t.num}" class="ymq_upload_status ymq_upload_success ymq_upload_file_item_del"></div>\n\t\t\t\t\t\t\t<div class="ymq_clear_both"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`,a.append(s),bestJq(`.ymq_upload_file_item_${t.num}`).fadeIn()),t.num++;t.inputDom.val("").change(),t.isDisabled()}addImg(t){var i=this,e=URL.createObjectURL(t),n=i.inputDom.parents(".ymq-options-box").find(".ymq_upload_img_view"),a=i.inputDom.prop("name"),o=`\n\t\t\t\t<div class="ymq_upload_img_item ymq_upload_file_item ymq_upload_file_item_${i.num}" style="display: none;" data-name="${a}" data-num="${i.num}">\n\t\t\t\t\t<img class="ymq_img_item" src="${e}" alt="">\n\t\t\t\t\t<div class="ymq_upload_img_item_bg">\n\t\t\t\t\t\t<span data-name="${a}" data-num="${i.num}" class="ymq_upload_img_item_del ymq_upload_file_item_del"></span>\n\t\t\t\t\t\t<div class="spotlight" data-src="${e}"></div>\n\t\t\t\t\t</div>\n\t\t\t  \t</div>\n\t\t\t`;i.fileData.hasOwnProperty(a)||(i.fileData[a]={}),i.fileData[a][i.num]={file:t,name:`${a}_${i.num}.jpg`},i.formData.append(a,t,`${a}.jpg`),n.prepend(o),bestJq(`.ymq_upload_file_item_${i.num}`).fadeIn(),i.modal.modal("hide"),i.num++,i.inputDom.val("").change(),i.isDisabled()}initModal(){var t=this;return bestJq("body").append('\n\t\t\t\t<div class="ymq-bmodal ymq-modal-fade" id="ymqBootModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">\n\t\t\t\t\t<div class="ymq-modal-dialog ymq-modal-lg" role="document">\n\t\t\t\t\t  <div class="ymq-bmodal-content">\n\t\t\t\t\t\t<div class="ymq-modal-header">\n\t\t\t\t\t\t  <div class="ymq-modal-close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="ymq-modal-body">\n\t\t\t\t\t\t  <div class="ymq-img-container">\n\t\t\t\t\t\t\t<div class="ymq-img-cropper-container">\n\t\t\t\t\t\t\t  <img id="ymq-upload-cropper-img" src="">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="ymq-img-review-container">\n\t\t\t\t\t\t\t  <div class="ymq-img-review">\n\t\t\t\t\t\t\t  </div>\n\t\t\t\t\t\t\t  <div class="ymq-img-action ymq-img-action_m ymq_m_show">\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t  </div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t  </div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="ymq-modal-footer">\n\t\t\t\t\t\t  <div class="ymq-cropper-button ymq-cropper-button-close" data-dismiss="modal">Close</div>\n\t\t\t\t\t\t  <div class="ymq-img-action ymq-img-action_pc ymq_pc_show">\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t  </div>\n\t\t\t\t\t\t  <div class="ymq-cropper-button" id="ymq-do-cropper">Save</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t  </div>\n\t\t\t\t\t</div>\n\t\t\t\t  </div>\n\t\t\t'),t.imgDom=bestJq("#ymq-upload-cropper-img"),t.modal=bestJq("#ymqBootModal"),t.modal.on("shown.bs.modal",(function(){t.newCropper()})).on("hidden.bs.modal",(function(){t.destroyCropper(),bestJq(".ymq-img-review").html("")})),t}static getInstance(){return this.instance||(this.instance=new t),this.instance}},Util=class t{constructor(t){this.instance=null,this.init()}init(){this.dateFormat().initSpotlight()}jstrigger(t,i){if(document.all)t.fireEvent("on"+i);else{var e=document.createEvent("Events");e.initEvent(i,!0,!0),t.dispatchEvent(e)}}getParenthesesStr(t){var i="";if(""==t)return i;var e=t.match(/\((.+?)\)/g);if(""!=e){let t=e[0];""!=t&&(i=t.substring(1,t.length-1))}return i}getShopifySmallImg(t){if(-1!=t.indexOf("shopify")&&-1==t.indexOf("x")){var i=t.lastIndexOf(".");return t.substring(0,i)+"_200x200"+t.substring(i,t.length)}return t}formatCurrency(t){t=t.toString().replace(/\$|\,/g,""),isNaN(t)&&(t="0");var i=t==(t=Math.abs(t)),e=(t=Math.floor(100*t+.50000000001))%100;t=Math.floor(t/100).toString(),e<10&&(e="0"+e);for(var n=0;n<Math.floor((t.length-(1+n))/3);n++)t=t.substring(0,t.length-(4*n+3))+","+t.substring(t.length-(4*n+3));return(i?"":"-")+t+"."+e}changeUriByVariantId(t){var i=this.makeJsonByGet(),e=document.URL,n=e.indexOf("?"),a=e.substring(0,n),o=[];i.variant=t,Object.keys(i).forEach((function(t){""!==i[t]&&o.push(`${t}=${i[t]}`)})),history.pushState(null,null,`${a}${o.length>0?"?":""}${o.join("&")}`)}htmlSpecialChars(t){return"string"==typeof(t=this.reHtmlSpecialChars(t))&&(t=(t=(t=(t=(t=t.replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;")).replace(/"/g,"&quot;")).replace(/'/g,"&#39;")),t}reHtmlSpecialChars(t){return"string"==typeof t&&(t=(t=(t=(t=(t=t.replace(/&amp;/g,"&")).replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&quot;/g,'"')).replace(/&#39;/g,"'")),t}variantIsSelect(t,i){return t==i||this.htmlSpecialChars(t)==i}makeJsonByGet(){for(var t=this,i={},e={},n=window.location.href,a=(n=n.replace(/.*\?/,"")).split("&"),o=0;o<a.length;o++)i[a[o].split("=")[0]]="";return Object.keys(i).forEach((function(i){var n=t.getUrlParam(i);n&&(e[i]=n)})),e}getUrlParam(t){var i=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),e=window.location.search.substr(1).match(i);return null!=e?decodeURI(e[2]):null}getValue(t,i,e){return t.hasOwnProperty(i)?t[i]:e}dateFormat(){return Date.prototype.Format=function(t){var i={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var e in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),i)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[e]:("00"+i[e]).substr((""+i[e]).length)));return t},this}initSpotlight(){var t,i,e=!1;bestJq("#spotlight .drag").mousedown((function(n){t=n.pageX,i=n.pageY,e=!1})),bestJq("#spotlight .drag").mouseup((function(n){(Math.abs(Number(t)-Number(n.pageX))>7||Math.abs(Number(i)-Number(n.pageY))>7)&&(e=!0)})),bestJq(document).on("click","#spotlight .drag",(function(){e||(bestJq(".preloader").removeClass("show"),bestJq("#spotlight .icon.close").click())})),bestJq(document).on("#spotlight .icon.close",(function(){bestJq(".preloader").removeClass("show")}))}static getInstance(){return this.instance||(this.instance=new t),this.instance}},Validate=class t{constructor(){var t=this;t.instance=null,t.dom=null,t.config=Config.getInstance(),t.upload=Upload.getInstance(),t.init()}initMemberVariables(){var t=this;t.selectDom=null,t.selectValueArray=[],t.selectValue="",t.domErrorArray=[],t.validateCount=0,t.validateArray=[],t.validateValue=[],t.form=bestJq(t.config.form_box)}init(){this.initMemberVariables()}doValidate(){var t=this,i=t.selectDom.parents(".ymq-options-box");t.domErrorArray=[];var e=0,n=99999;t.validateArray.forEach((function(t){t.search("min_s:")>-1&&(e=Number(t.split(":")[1])),t.search("max_s:")>-1&&(n=Number(t.split(":")[1]))})),0==e&&0==n||(e==n?(t.selectValueArray.length>n-1?bestJq(`#${i.prop("id")} input:checkbox:not([data-title]):not(:checked)`).prop("disabled",!0):bestJq(`#${i.prop("id")} input:checkbox:not([data-title]):not(:checked)`).prop("disabled",!1),t.selectValueArray.length!=e&&(t.config.ymq_option_branding.lan.hasOwnProperty("total_s")?t.domErrorArray.push(t.config.ymq_option_branding.lan.total_s.replace("%s",e)):t.domErrorArray.push("You need to choose "+e+"."))):(t.selectValueArray.length<e&&(t.config.ymq_option_branding.lan.hasOwnProperty("min_s")?t.domErrorArray.push(t.config.ymq_option_branding.lan.min_s.replace("%s",e)):t.domErrorArray.push("You need to choose more than "+e+".")),t.selectValueArray.length>n&&(t.config.ymq_option_branding.lan.hasOwnProperty("max_s")?t.domErrorArray.push(t.config.ymq_option_branding.lan.max_s.replace("%s",n)):t.domErrorArray.push("You need to choose less than "+n+".")),t.selectValueArray.length>n-1?bestJq(`#${i.prop("id")} input:checkbox:not([data-title]):not(:checked)`).prop("disabled",!0):bestJq(`#${i.prop("id")} input:checkbox:not([data-title]):not(:checked)`).prop("disabled",!1))),t.validateArray.forEach((function(i){"required"==i&&(t.json.hasOwnProperty("isFile")?t.upload.fileData.hasOwnProperty(t.json.name)?bestJq.isEmptyObject(t.upload.fileData[t.json.name])&&t.domErrorArray.push(t.config.ymq_option_branding.lan.require):t.domErrorArray.push(t.config.ymq_option_branding.lan.require):""==t.selectValue&&t.domErrorArray.push(t.config.ymq_option_branding.lan.require)),""!=t.selectValue&&(i.search("minchar:")>-1&&t.selectValue.length<i.split(":")[1]&&t.domErrorArray.push(t.config.ymq_option_branding.lan.min_char.replace("%s",i.split(":")[1])),i.search("maxchar:")>-1&&t.selectValue.length>i.split(":")[1]&&t.domErrorArray.push(t.config.ymq_option_branding.lan.max_char.replace("%s",i.split(":")[1])),i.search("min:")>-1&&Number(t.selectValue)<Number(i.split(":")[1])&&t.domErrorArray.push(t.config.ymq_option_branding.lan.min.replace("%s",i.split(":")[1])),i.search("max:")>-1&&Number(t.selectValue)>Number(i.split(":")[1])&&t.domErrorArray.push(t.config.ymq_option_branding.lan.max.replace("%s",i.split(":")[1])),"email"!=i||t.config.emailRe.test(t.selectValue)||t.domErrorArray.push(t.config.ymq_option_branding.lan.email),"integer"==i&&t.selectValue%1!=0&&t.domErrorArray.push(t.config.ymq_option_branding.lan.integer),"number"!=i||t.config.numberRe.test(t.selectValue)||t.domErrorArray.push(t.config.ymq_option_branding.lan.number),i.search("float:")>-1&&t.selectValue%1!=0&&t.selectValue.toString().split(".")[1].length>i.split(":")[1]&&t.domErrorArray.push(`${i.split(":")[1]}小数`))}))}validateOne(t,i=!1){var e=this;if(e.json=t,t&&t.validate){e.validateArray=t.validate.split("|"),e.selectDom=t.dom,e.selectValueArray=t.value,e.selectValue=t.value.join(","),e.doValidate();var n="";if(e.domErrorArray.length){e.domErrorArray.forEach((function(t){n+=`\n\t\t\t\t\t\t\t<div class="ymq-error-item">${t}</div>\n\t\t\t\t\t\t`}));var a=t.dom.parents(".ymq-options-box");if(0==e.validateCount&&i){if(a.offset().top+a.outerHeight()<bestJq(window).scrollTop()){var o=a.offset().top-200;bestJq("html, body").animate({scrollTop:o},500)}t.dom.focus()}e.validateCount++,t.dom.parents(".ymq-options-box").find("textarea").addClass("ymq_error_border"),t.dom.parents(".ymq-options-box").find(".selectDropdown").find("span").addClass("ymq_error_border"),t.dom.parents(".ymq-options-box").find("input[type='text']").addClass("ymq_error_border")}else t.dom.parents(".ymq-options-box").find("textarea").removeClass("ymq_error_border"),t.dom.parents(".ymq-options-box").find(".selectDropdown").find("span").removeClass("ymq_error_border"),t.dom.parents(".ymq-options-box").find("input[type='text']").removeClass("ymq_error_border");t.dom.parents(".ymq-options-box").find(".ymq-error-box").html(n)}}validateAll(t,i=!1){var e=this;e.validateCount=0,Object.keys(t).forEach((function(n){e.validateOne(t[n],i)}))}validateOneWithOutPrompt(t){var i=this;return i.json=t,!!(t&&t.validate&&(i.validateArray=t.validate.split("|"),i.selectDom=t.dom,i.selectValueArray=t.value,i.selectValue=t.value.join(","),i.doValidate(),i.domErrorArray.length))}validateAllWithOutPrompt(t){var i=this,e=!1;try{Object.keys(t).forEach((function(n){if(i.validateOneWithOutPrompt(t[n]))throw e=!0,new Error("breakForEach")}))}catch(t){if("breakForEach"!=t.message)throw t}return e}require(){}testValidate(t){t?this.success():this.error()}success(){}error(){this.dom.addClass("ymq_error")}static getInstance(){return this.instance||(this.instance=new t),this.instance}},Variant=class t{constructor(){var t=this;t.instance=null,t.htmlBuilder=Html.getInstance(),t.config=Config.getInstance(),t.addVariantIdInput().init()}initMemberVariables(){var t=this;t.variantJson={},t.variant_id=0,t.allVariantJson={},t.notAvailableVariantJson={},t.ymq_shopify_options_with_index_key={}}init(){this.initMemberVariables(),this.initVariantId().initNotAvailableVariantJson().initVariantJson()}initNotAvailableVariantJson(){var t=this;return t.config.product.variants.forEach((function(i){i.available||(t.notAvailableVariantJson[i.id]=i.options),t.allVariantJson[i.id]=i.options})),t}isSoldOut(){var t=this,i=[],e=[];return bestJq(".ymq-shopify-option-box").each((function(t){"3"==bestJq(this).data("type").toString()?(e.push(1),i.push(bestJq(this).find("select").val().join(",").toString()),bestJq(this).find("option").prop("disabled",!1)):(e.push(0),i.push(bestJq(this).find("input:checked").val().toString()),bestJq(this).find("input").prop("disabled",!1))})),i.forEach((function(n,a){var o=n,r=!1;t.ymq_shopify_options_with_index_key[a]&&t.ymq_shopify_options_with_index_key[a].forEach((function(n,s){n=t.config.util.reHtmlSpecialChars(n);var l=Object.assign([],i);if(n!=o&&(l[a]=n,Object.keys(t.notAvailableVariantJson).forEach((function(i){JSON.stringify(l)==JSON.stringify(t.notAvailableVariantJson[i])&&(1==e[a]?(bestJq(`#ymq-attrib-ymq-variant-${a}`).find("option").eq(s).prop("disabled",!0),bestJq(`#option-box-ymq-variant-${a} .ymq-multiple-ul li`).eq(s).data("title",t.config.ymq_option_branding.lan.sold_out)):bestJq(`#ymq-attrib-ymq-variant-${a}-0`).parents(".ymq-shopify-option-box").find("input").eq(s).prop("disabled",!0).next().data("title",t.config.ymq_option_branding.lan.sold_out),r=!0)})),0==r)){var c=!1;try{Object.keys(t.allVariantJson).forEach((function(i){if(console.log(l,t.allVariantJson[i]),JSON.stringify(l)==JSON.stringify(t.allVariantJson[i]))throw c=!0,new Error("breakForEach")}))}catch(t){if("breakForEach"!=t.message)throw t}0==c&&(1==e[a]?(bestJq(`#ymq-attrib-ymq-variant-${a}`).find("option").eq(s).prop("disabled",!0),bestJq(`#option-box-ymq-variant-${a} .ymq-multiple-ul li`).eq(s).data("title",t.config.ymq_option_branding.lan.sold_out)):bestJq(`#ymq-attrib-ymq-variant-${a}-0`).parents(".ymq-shopify-option-box").find("input").eq(s).prop("disabled",!0).next().data("title",t.config.ymq_option_branding.lan.sold_out))}}))})),bestJq(".ymq-shopify-option-box select").each((function(i){t.htmlBuilder.initDropdown(bestJq(`#ymq-attrib-ymq-variant-${i}`))})),t}initTypeVariantJson(t,i,e=null,n,a=null){var o=this,r={};return r.help=e?e.help:"",r.id=`ymq-variant-${i}`,r.label=t,r.options={},r.isShopify=!0,r.optionsIndex=i,r.required="",r.type=n,null!=a&&(r.style=a),r.tooltip=e?e.tooltip:"",r.tooltip_position=e?e.tooltip_position:"",r.alert_text=e&&e.hasOwnProperty("alert_text")?e.alert_text:"",r.a_t1=e&&e.hasOwnProperty("a_t1")?e.a_t1:"",r.a_t2=e&&e.hasOwnProperty("a_t2")?e.a_t2:"",r.a_width=e&&e.hasOwnProperty("a_width")?e.a_width:"",o.config.ymq_shopify_options[t].forEach((function(t,e){r.options[`${r.id}-${e}`]={id:`${r.id}-${e}`,one_time:0,price:0,price_type:"1",sku:"",value:t},o.config.util.variantIsSelect(o.config.variantData[o.variant_id].options[i],t)?r.options[`${r.id}-${e}`].default=1:r.options[`${r.id}-${e}`].default=""})),r}initDrodownVariantJson(t,i,e=null){return this.initTypeVariantJson(t,i,e,"3")}initRadioVariantJson(t,i,e=null){return this.initTypeVariantJson(t,i,e,"4",1)}initButtonVariantJson(t,i,e=null){return this.initTypeVariantJson(t,i,e,"15",2)}initCanvasVariantJson(t,i,e){var n=this,a={};return a.help=e.help,a.id=`ymq-variant-${i}`,a.label=t,a.options={},a.isShopify=!0,a.optionsIndex=i,a.style=1,a.required="",a.tooltip=e.tooltip,a.tooltip_position=e.tooltip_position,a.style=e.style,a.width=e.width,a.height=e.height,a.b_radius=e.b_radius,a.zoom=e.zoom,a.type="5",a.alert_text=e.hasOwnProperty("alert_text")?e.alert_text:"",a.a_t1=e.hasOwnProperty("a_t1")?e.a_t1:"",a.a_t2=e.hasOwnProperty("a_t2")?e.a_t2:"",a.a_width=e.hasOwnProperty("a_width")?e.a_width:"",n.config.ymq_shopify_options[t].forEach((function(t,o){a.options[`${a.id}-${o}`]={id:`${a.id}-${o}`,one_time:0,price:0,price_type:"1",sku:"",canvas1:e.values[o].canvas1,canvas2:e.values[o].canvas2,canvas_type:e.values[o].canvas_type,value:t},n.config.util.variantIsSelect(n.config.variantData[n.variant_id].options[i],t)?a.options[`${a.id}-${o}`].default=1:a.options[`${a.id}-${o}`].default=""})),a}initVariantJson(){var t=this;return console.log(t.config.ymq_variantjson,11111),t.config.ymq_has_only_default_variant||Object.keys(t.config.ymq_shopify_options).forEach((function(i,e){t.ymq_shopify_options_with_index_key[e]=t.config.ymq_shopify_options[i];var n="",a={};if(t.config.ymq_variantjson.hasOwnProperty(e)){var o=t.config.ymq_variantjson[e];n=o.type.toString()}else n=t.config.util.getValue(t.config.ymq_option_branding.extra,"init-variant-type",1).toString();switch(n){case"1":a=t.initDrodownVariantJson(i,e,o);break;case"2":a=t.initRadioVariantJson(i,e,o);break;case"3":a=t.initButtonVariantJson(i,e,o);break;case"4":a=t.initCanvasVariantJson(i,e,o);break;default:a=t.initDrodownVariantJson(i,e,o)}t.variantJson[a.id]=a})),t}buildVariantHtml(){var t=this;return t.config.ymq_has_only_default_variant||t.htmlBuilder.setJson(t.variantJson).buildtHtml(),t}initVariantId(){var t=this;if(t.variant_id=Number(t.config.util.getUrlParam("variant")),t.variant_id&&t.config.variantData.hasOwnProperty(t.variant_id)||(t.variant_id=Number(t.config.product.variants[0].id)),t.changeVariantId(),!t.config.variantData[t.variant_id].available)try{Object.keys(t.config.variantData).forEach((function(i){if(t.config.variantData[i].available)throw t.variant_id=Number(i),t.changeVariantId(),t.config.util.changeUriByVariantId(t.variant_id),new Error("LoopTerminates")}))}catch(t){if("LoopTerminates"!==t.message)throw t}return t}changeUriByVariantId(){var t=this,i=[],e={},n=[];t.config.hideByNow&&bestJq(".shopify-payment-button").hide().remove(),bestJq(".ymq-shopify-option-box").each((function(){var t=bestJq(this).find(".ymq_lable").text();"3"==bestJq(this).data("type").toString()?bestJq(this).find(".ymq-shopify-option").each((function(){i.push(bestJq(this).val().toString()),e[t]=bestJq(this).val().toString(),n.push(bestJq(this).val().toString())})):bestJq(this).find(".ymq-shopify-option:checked").each((function(){i.push(bestJq(this).val().toString()),e[t]=bestJq(this).val().toString(),n.push(bestJq(this).val().toString())}))}));var a=t.config.util.getValue(t.config.ymq_option_branding.extra,"trigger-select",""),o=t.config.util.getValue(t.config.ymq_option_branding.extra,"trigger-select-join","");return""!=a&&(bestJq(a).val(n.join(o)).trigger("change"),t.config.util.jstrigger(bestJq(a).get(0),"change")),Object.keys(e).forEach((function(i,n){var a=e[i];if(t.config.shopifySelectDom[i]&&"select"==t.config.shopifySelectDom[i].type){t.config.shopifySelectDom[i].jq.find("option").each((function(){bestJq(this).val()==a?bestJq(this).prop("selected",!0).trigger("click"):bestJq(this).prop("selected",!1)})),t.config.shopifySelectDom[i].jq.val(a).trigger("change");var o=document.getElementById(t.config.shopifySelectDom[i].id);t.config.util.jstrigger(o,"change")}t.config.shopifySelectDom[i]&&"radio"==t.config.shopifySelectDom[i].type&&t.config.shopifySelectDom[i].jq.each((function(e){if(bestJq(this).val()==a){bestJq(this).prop("checked",!0).trigger("click");var n=document.getElementsByName(t.config.shopifySelectDom[i].name)[e];t.config.shopifySelectDom[i].jq.trigger("change"),t.config.util.jstrigger(n,"change")}else bestJq(this).prop("checked",!1)}))})),t.config.product.variants.forEach((function(e){JSON.stringify(e.options)==JSON.stringify(i)&&(t.variant_id=Number(e.id),t.changeVariantId())})),t.config.util.changeUriByVariantId(t.variant_id),t}addVariantIdInput(){var t=this;if(!bestJq(`#${t.config.ymq_variant_id}`).length){var i=`\n\t\t\t\t\t<input id="${t.config.ymq_variant_id}" type="hidden" value="">\n\t\t\t\t`;bestJq(t.config.form_box).append(i)}return t}changeVariantId(){var t=this;bestJq(`#${t.config.ymq_variant_id}`).val(t.variant_id),bestJq(t.config.form_box).find("[name='id']").val(t.variant_id)}static getInstance(){return this.instance||(this.instance=new t),this.instance}};return{Product:Product}}));